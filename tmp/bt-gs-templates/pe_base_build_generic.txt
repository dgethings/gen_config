groups {
    allow-vrf-martians {
        routing-instances {
            <*> {
                routing-options {
                    martians {
                        0.0.0.0/8 orlonger allow;
                        127.0.0.0/8 orlonger allow;
                        128.0.0.0/16 orlonger allow;
                        191.255.0.0/16 orlonger allow;
                        192.0.0.0/24 orlonger allow;
                        223.255.255.0/24 orlonger allow;
                        240.0.0.0/4 orlonger allow;
                    }
                }
            }
        }
    }
    Generic_Provider_Cos-FCE {
        firewall {
            family inet {
                filter <*> {
                    interface-specific;
                    term Generic_Provider_Cos-FCE-1-all {
                        then {
                            count Generic_Provider_Cos-FCE-all;
                            next term;
						}
                    }
                    term Generic_Provider_Cos-FCE-1-pol {
                        then {
                            count Generic_Provider_Cos-FCE-pol;
                            next term;
						}
                    }
                    term Generic_Provider_Cos-FCE-1-ic {
                        from loss-priority low;
                        then {
                            count Generic_Provider_Cos-FCE-ic;
                            forwarding-class FC-Q1;
                            accept;
                        }
                    }
                    term Generic_Provider_Cos-FCE-1-oc {
                        from loss-priority [ medium-high high ];
                        then {
                            count Generic_Provider_Cos-FCE-oc;
                            forwarding-class FC-Q1;
                            accept;
                        }
                    }
                }
            }
        }
    }
    Fix_SAN {
        firewall {
            family inet {
                filter <*> {
                    interface-specific;
                    term Fix_SAN-1-all {
                        from {
                            dscp cs1;
                        }
                        then {
                            count Fix_SAN-all;
                            next term;
						}
                    }
                    term Fix_SAN-1-pol {
                        from {
                            dscp cs1;
                        }
                        then {
                            count Fix_SAN-pol;
                            next term;
						}
                    }
                    term Fix_SAN-1-ic {
                        from {
                            dscp cs1;
                            loss-priority low;
                        }
                        then {
                            count Fix_SAN-ic;
                            forwarding-class FC-Q1;
                            accept;
                        }
                    }
                    term Fix_SAN-1-oc {
                        from {
                            dscp cs1;
                            loss-priority [ medium-high high ];
                        }
                        then {
                            count Fix_SAN-oc;
                            forwarding-class FC-Q1;
                            accept;
                        }
                    }
                }
            }
        }
    }
    AF2_SAN {
        firewall {
            family inet {
                filter <*> {
                    interface-specific;
                    term AF2_SAN-1-all {
                        from {
                            dscp af21;
                        }
                        then {
                            count AF2_SAN-all;
                            next term;
						}
                    }
                    term AF2_SAN-1-pol {
                        from {
                            dscp af21;
                        }
                        then {
                            count AF2_SAN-pol;
                            next term;
						}
                    }
                    term AF2_SAN-1-ic {
                        from {
							dscp af21;
                            loss-priority low;
                        }
                        then {
                            count AF2_SAN-ic;
                            forwarding-class FC-Q1;
                            accept;
                        }
                    }
                    term AF2_SAN-1-oc {
                        from {
                            dscp af21;
                            loss-priority [ medium-high high ];
                        }
                        then {
                            count AF2_SAN-oc;
                            forwarding-class FC-Q1;
                            accept;
                        }
                    }
                }
            }
        }
    }
    AF1_SAN {
        firewall {
            family inet {
                filter <*> {
                    interface-specific;
                    term AF1_SAN-1-all {
                        from {
                            dscp af11;
                        }
                        then {
                            count AF1_SAN-all;
                            next term;
						}
                    }
                    term AF1_SAN-1-pol {
                        from {
                            dscp af11;
                        }
                        then {
                            count AF1_SAN-pol;
                            next term;
						}
                    }
                    term AF1_SAN-1-ic {
                        from {
							dscp af11;
                            loss-priority low;
                        }
                        then {
                            count AF1_SAN-ic;
                            forwarding-class FC-Q1;
                            accept;
                        }
                    }
                    term AF1_SAN-1-oc {
                        from {
                            dscp af11;
                            loss-priority [ medium-high high ];
                        }
                        then {
                            count AF1_SAN-oc;
                            forwarding-class FC-Q1;
                            accept;
                        }
                    }
                }
            }
        }
    }
}
apply-groups allow-vrf-martians;
system {
    domain-name jtac-emea.jnpr.net;
    time-zone UTC;
    inactive: default-address-selection;
    no-redirects;
    internet-options {
        tcp-drop-synfin-set;
    }
    authentication-order [ radius password ];
    ports {
        console {
            log-out-on-disconnect;
            type vt100;
        }
        auxiliary insecure;
    }
    root-authentication {
        encrypted-password "$1$maPAXuaQ$PVJqIaAMoiX18IHpcXY4Q0"; ## SECRET-DATA
    }
    name-server {
        172.30.155.131;
    }
    inactive: accounting {
        events [ login change-log interactive-commands ];
        destination {
		    radius {
		        server {
		            172.30.155.131 secret "$9$JSZjqmPQ3nCq.0BEhrl"; ## SECRET-DATA
		        }
		    }
		}
    }
    login {
        message "\nBritish Telecommunications plc\n\nWARNING: You have accessed a network device operated by BT. You are required\nto have a personal authorisation from the system administrator before you use\nthis computer and you are strictly limited to the use set out in that written\nauthorisation. Unauthorised access to or misuse of this system is prohibited\nand may constitute an offence under the Computer Misuse Act 1990.\n\nIf you disclose any information obtained through this system without authority\nBT will take appropriateaction against you. This may include legal\nproceedings, prosecution and disciplinary action up to and including\ndismissal.\n\n";
        retry-options {
            tries-before-disconnect 3;
        }
        class ro-group {
            idle-timeout 30;
            permissions view;
        }
        class su-group {
            idle-timeout 30;
            permissions all;
        }
        user read {
            full-name "TACACS+ authenticated read-only";
            class ro-group;
            authentication {                    
			    encrypted-password "$1$qVafvXvL$OUT5MIWst1L.IQGKEuJvi."; ## SECRET-DATA
			}
        }
        user write {
            full-name "TACACS+ authenticated superuser";
            class su-group;
            authentication {
			    encrypted-password "$1$lQCKfPTl$eu2M8SohHdMnTyCslRowu/"; ## SECRET-DATA
			}
        }
    }
    services {
        telnet {
            connection-limit 16;
            rate-limit 16;
        }
    }
    syslog {
        archive size 1m files 10;
        user * {
            any critical;
        }
        host 172.30.155.131 {
            any notice;
            daemon info;
            facility-override local7;
            log-prefix Juniper;
        }
        host other-routing-engine {
            any error;
            log-prefix OTHER-RE;
        }
        file messages {
            any notice;
            authorization none;
            archive size 10m files 5 world-readable;
        }
        file syslog {
            any info;
            firewall none;
            archive size 5m files 5;
        }
        file security {
            authorization notice;
        }
        file commands {
            interactive-commands info;
        }
        file firewall-filter-log {
            firewall any;
        }
        console {
            any critical;
        }
        time-format year millisecond;
    }
    compress-configuration-files;
    commit synchronize;
    ntp {
        boot-server 172.30.155.131;
        server 172.30.155.131 prefer;
    }
}
chassis {
    redundancy {
        failover {
            on-loss-of-keepalives;
            on-disk-failure;
        }
        graceful-switchover;
    }
    inactive: alarm {
        management-ethernet {
            link-down ignore;
        }
    }
	network-services ip;
}
interfaces {
    lo0 {
        unit 0 {
            family inet {
                filter {
                    input protect-RE;
                    output RSVP-rate-limit;
                }
                address 127.0.0.1/32;
            }
        }
        unit 200 {
            description "dummy vrf loopback";
        }
    }
}
forwarding-options {
    hash-key {
        family mpls {
            label-1;
            label-2;
            payload {
                ip {
                    layer-3-only;
                }
            }
        }
    }
}
event-options {
    policy PIM-Neighbour-Changes {
        events [ rpd_pim_nbrdown rpd_pim_nbrup ];
        then {
            raise-trap;
        }
    }
    policy OSPF-LDP-Loss-of-Sychronisation {
        events rpd_ospf_ldp_sync;
        then {
            raise-trap;
        }
    }
    policy LDP-Adjacency-Changes {
        events [ rpd_ldp_nbrdown rpd_ldp_nbrup ];
        then {
            raise-trap;
        }
    }
}
snmp {
    location Amsterdam;
    contact "David Gethings <dgethings@juniper.net>";
    view QuebecROView {
        oid ifMIB include;
        oid jnxCos include;
        oid 1.3.6.1.2.1 include;
        oid jnxFWCounter include;
        oid jnxRpmMib include;
        oid jnxBoxAnatomy include;
        oid jnxFirewallCounterTable include;
    }
    view novacm {
        oid internet include;
        oid internet.6.3.15 exclude;
        oid internet.6.3.16 exclude;
        oid internet.6.3.18 exclude;
    }
    view SmartsROView {
        oid 1.3.6.1.2.1 include;
        oid 1.3.6.1.3.96 include;
        oid 1.3.6.1.3.118 include;
        oid 1.3.6.1.4.1.9.9 include;
        oid 1.3.6.1.4.1.9.2 include;
        oid 1.3.6.1.4.1.2636 include;
        oid 1.3.6.1.2.1.15 include;
        oid 1.3.6.1.2.1.14 include;
        oid 1.3.6.1.2.1.10.166.2 include;
    }
    view NOC_controlled_RO {
        oid internet include;
    }
    view CMMROView {
        oid 1.3.6.1.2.1.2 include;
        oid 1.3.6.1.2.1.1.2 include;
        oid 1.3.6.1.2.1.1.3 include;
        oid 1.3.6.1.2.1.1.5 include;
        oid 1.3.6.1.2.1.1.1 include;
        oid 1.3.6.1.3.61 include;
        oid 1.3.6.1.2.1.83 include;
        oid 1.3.6.1.2.1.85 include;
        oid 1.3.6.1.3.92 include;
        oid 1.3.6.1.4.1.9.5.0 include;
        oid 1.3.6.1.3.118 include;
        oid 1.3.6.1.4.1.9.10.113 include;
        oid 1.3.6.1.2.1.4.20.1 include;
    }
    view BTIROView {
        oid 1.3.6.1.2.1 include;
        oid jnxCos include;
        oid jnxFirewallCounterTable include;
    }
    view CABLEDOCSISROView {
        oid internet include;
    }
    community cable-docsis {
        view CABLEDOCSISROView;
        authorization read-only;
        clients {
            0.0.0.0/0 restrict;
        }
    }
    community Quebec_RO_string {
        view QuebecROView;
        authorization read-only;
        clients {
            172.30.155.0/24;
        }
    }
    community Smarts_core_RO_string {
        view SmartsROView;
        authorization read-only;
        clients {
            172.30.155.0/24;
        }
    }
    community concord_ehealth_string {
        view NOC_controlled_RO;
        authorization read-only;
        clients {
            172.30.155.0/24;
        }
    }
    community public {
        view novacm;
        authorization read-only;
        clients {
            172.30.155.0/24;
        }
    }
    community CMM_RO_string {
        view CMMROView;
        authorization read-only;
        clients {
            172.30.155.0/24;
        }
    }
    community BTI_RO_string {
        view BTIROView;
        authorization read-only;
        clients {
            172.30.155.0/24;
        }
    }
    community public2 {
        view NOC_controlled_RO;
        authorization read-only;
        clients {
            172.30.155.0/24;
        }
    }
    trap-options {
        source-address lo0;
    }
    trap-group PE_router_SNMP_group {
        version v1;
        categories {
            chassis;
            link;
            routing;
            startup;
            rmon-alarm;
            configuration;
            sonet-alarms;
        }
        targets {
            172.30.155.131;
            172.30.155.153;
        }
    }
    trap-group Smarts_core_RO_string {
        version v2;
        categories {
            chassis;
            link;
            routing;
            startup;
            rmon-alarm;
            configuration;
            sonet-alarms;
        }
        targets {
            172.30.155.131;
            172.30.155.153;
        }
    }
}
routing-options {
    l3vpn-composite-nexthop;
    nonstop-routing;
    static {
        route 127.0.0.0/24 receive;
    }
    martians {
        127.0.0.0/24 orlonger allow;
    }
    aggregate {
        route 7.0.0.0/24;
    }
    rib-groups {
        daf-red {
            import-rib [ red.inet.0 inet.0 ];
        }
        daf-blue {
            import-rib [ blue.inet.0 inet.0 ];
        }
    }
    autonomous-system 12641;
    forwarding-table {
        export load-balancing-policy;
        indirect-next-hop;
    }
	multicast {
	    ssm-groups 232.232.0.0/16;
		forwarding-cache {
            threshold {
                suppress 7500;
            }
        }
	}
}
protocols {
    mpls {
        no-propagate-ttl;
        icmp-tunneling;
    }
    bgp {
        path-selection always-compare-med;
        log-updown;
        damping;
        group RR-group {
            type internal;
            out-delay 1;
            log-updown;
            import bgp-policies-RR-group-import;
            family inet-vpn {
                unicast;
            }
			family inet-mdt {
				signaling;
			}
            export SET-NEXT-HOP;
			vpn-apply-export;
			advertise-external;
        }
    }
    ospf {
        spf-options {
            delay 400;
            holddown 5000;
            rapid-runs 10;
        }
    }
    ldp {
        track-igp-metric;
        strict-targeted-hellos;
        egress-policy RED-BLUE-ACL1;
        deaggregate;
        keepalive-interval 60;
        keepalive-timeout 180;
        igp-synchronization holddown-interval 20;
    }
	pim {
        nonstop-routing {
            disable;
        }
        interface lo0.0 {
            mode sparse;
            version 2;
        }
        default-vpn-source {
            interface-name lo0.0;
        }
    }
}
policy-options {
    prefix-list ACL-8-loopback200 {
		62.6.3.0/24;
        62.6.6.0/24;
        62.6.15.0/24;
        62.6.17.0/24;
        62.6.18.0/24;
        62.6.71.0/24;
        62.6.89.0/24;
        62.6.99.0/25;
        62.6.192.0/24;
        81.144.16.0/24;
        81.144.17.0/24;
        81.144.23.0/24;
        81.144.126.0/24;
        212.21.217.0/24;
        212.31.208.0/24;
        212.31.213.0/24;
        212.31.220.0/24;
        217.32.139.0/24;
        217.32.236.0/24;
        217.41.181.0/24;
        217.46.10.0/24;
    }
    prefix-list ACL-11-CE-mgmt-loopbacks {
		23.62.0.0/16;
        62.5.0.0/17;
        62.5.36.96/27;
        62.6.24.0/22;
        62.6.28.0/24;
        62.6.72.0/21;
        62.6.80.0/24;
        62.6.82.0/23;
        62.6.84.0/22;
        62.6.112.0/20;
        62.7.128.0/19;
        62.7.160.0/21;
        62.7.168.0/23;
        62.102.24.0/24;
        62.102.36.0/22;
        62.102.40.0/22;
        62.102.44.0/22;
        62.102.52.0/22;
        62.102.56.0/22;
        62.102.60.0/22;
        62.134.20.0/23;
        62.134.134.0/23;
        62.134.136.0/24;
        62.134.137.64/26;
        62.134.138.0/23;
        62.134.140.0/22;
        62.134.149.0/24;
        62.134.208.0/23;
        62.134.210.0/24;
        62.134.211.0/24;
        62.134.235.0/24;
        62.134.236.0/24;
        62.134.238.0/23;
        62.134.248.0/21;
        62.172.18.0/23;
        62.172.20.0/22;
        62.172.24.0/21;
        62.172.240.0/20;
        62.180.234.0/24;
        62.239.40.128/25;
        62.239.44.0/24;
        62.239.56.0/24;
        62.239.96.0/21;
        62.239.112.0/23;
        62.239.114.0/24;
        62.239.117.0/24;
        62.239.118.0/24;
        62.239.128.0/22;
        62.239.140.0/22;
        62.239.144.0/24;
        62.239.145.0/24;
        62.239.146.0/24;
        62.239.147.0/24;
        62.239.148.0/23;
        62.239.150.0/23;
        62.239.152.0/23;
        62.239.181.0/24;
        62.239.189.64/26;
        62.239.192.0/19;
        62.239.250.0/23;
        81.144.0.0/20;
        81.144.35.0/24;
        81.144.36.0/22;
        81.144.40.0/21;
        81.144.96.0/22;
        81.146.74.0/24;
        81.146.76.0/22;
        81.146.96.0/19;
        81.146.128.0/19;
        89.118.252.0/24;
        89.118.253.0/24;
        89.118.254.0/23;
        150.141.237.0/24;
        156.5.185.192/26;
        160.221.41.0/24;
        160.221.42.0/24;
        193.203.132.0/23;
        212.8.178.0/23;
        212.21.212.0/23;
        212.31.217.0/24;
        212.31.218.0/24;
        212.31.219.0/24;
        212.140.82.0/23;
        212.140.84.0/22;
        212.140.205.0/24;
        212.140.213.160/27;
        212.163.60.0/23;
        212.163.62.0/24;
        212.163.216.0/21;
        212.163.236.0/22;
        213.1.134.0/23;
        213.1.136.0/23;
        213.15.200.0/21;
        213.15.208.0/22;
        213.15.212.0/22;
        213.15.218.0/23;
        213.15.220.0/23;
        213.31.217.0/24;
        213.120.46.0/23;
        213.120.68.0/24;
        213.120.136.0/23;
        213.121.36.0/23;
        213.121.44.0/23;
        213.121.46.0/24;
        213.121.53.0/24;
        213.121.57.0/24;
        213.121.58.0/23;
        213.121.60.0/23;
        213.121.72.0/23;
        213.121.142.0/24;
        213.121.223.0/24;
        213.121.224.0/21;
        213.122.70.0/23;
        213.122.152.0/23;
        213.122.154.0/24;
        213.122.206.0/23;
        213.123.76.0/23;
        213.194.50.0/23;
        213.194.53.0/24;
        213.194.54.0/23;
        213.194.56.0/24;
        213.194.57.0/24;
        213.194.58.0/23;
        213.236.72.0/21;
        213.236.96.0/21;
        217.32.105.192/26;
        217.32.106.0/24;
        217.32.116.0/23;
        217.32.136.0/23;
        217.32.172.0/22;
        217.32.228.0/23;
        217.32.248.192/26;
        217.32.250.0/23;
        217.35.176.0/21;
        217.36.160.0/20;
        217.36.184.0/22;
        217.46.0.0/21;
        217.46.20.0/22;
        217.46.28.0/23;
    }
    prefix-list dns-addresses {
        apply-path "system name-server <*>";
    }
    prefix-list ftp-addresses {
        172.30.155.0/24;
    }
    prefix-list localhost {
        127.0.0.1/32;
    }
    prefix-list ntp-addresses {
        172.30.155.131/32;
        apply-path "interfaces lo0 unit 0 family inet address <*>";
    }
    prefix-list snmp-addresses {
        172.30.155.0/24;
    }
    prefix-list tacacs-addresses {
        172.30.155.0/24;
    }
    prefix-list telnet-addresses {
		172.16.0.0/12;
    }
    prefix-list loopback100 {
        62.6.2.0/24;
        62.6.10.0/24;
        62.6.18.0/23;
        62.6.70.0/24;
        62.6.88.0/24;
        62.6.90.0/24;
        62.6.99.0/25;
        212.21.216.0/24;
        212.31.213.0/24;
        212.31.220.0/24;
        217.32.138.0/24;
        217.46.8.0/24;
        217.46.10.0/24;
    }
    prefix-list loopback60 {
        62.6.21.0/24;
        62.6.101.0/24;
        217.46.16.0/24;
        217.46.18.0/24;
        217.46.19.0/24;
    }
    prefix-list loopback70 {
        62.6.5.0/24;
        62.6.11.0/24;
        62.6.22.0/24;
        212.21.218.0/24;
        217.46.17.0/24;
    }
    prefix-list ACL-13-cascaded-mgmt {
		81.144.48.0/20;
        81.145.0.0/21;
        109.159.208.0/20;
        213.121.36.0/23;
        213.121.46.0/24;
        213.121.53.0/24;
        213.121.57.0/24;
        213.121.142.0/24;
        213.121.223.0/24;
        213.122.154.0/24;
    }
    prefix-list ACL-30-bt-nmc-mgmt {
        62.6.69.88/29;
        62.6.69.96/29;
        62.6.69.112/28;
        62.6.69.128/28;
        62.80.64.0/24;
        62.80.66.128/28;
        62.134.38.0/25;
        62.239.34.0/24;
        62.239.35.98/31;
        62.239.35.128/27;
        81.146.75.0/27;
        147.149.52.0/24;
        147.150.52.0/24;
        147.151.39.224/27;
        147.151.61.0/25;
        147.151.77.0/24;
        147.151.102.0/24;
        147.151.107.0/24;
        147.151.170.0/24;
        147.151.204.0/24;
        147.151.205.0/24;
        162.54.52.0/24;
        168.125.7.0/28;
        168.125.7.212/32;
        168.125.240.0/23;
        193.113.36.0/24;
        193.203.132.0/28;
        194.72.6.64/27;
        194.72.6.112/28;
        194.72.6.176/29;
        194.72.6.208/28;
        194.74.74.160/27;
        194.74.74.195/32;
        194.74.75.0/24;
        194.74.76.32/27;
        194.74.80.0/24;
        194.74.81.89/32;
        194.102.6.0/24;
        194.102.7.133/32;
        194.102.7.141/32;
        194.102.19.0/24;
        195.100.115.0/28;
        195.171.36.64/27;
        195.182.110.224/27;
        195.182.112.192/26;
        195.182.114.192/27;
        212.31.215.192/28;
        212.31.215.240/28;
        212.162.213.229/32;
        212.162.213.241/32;
        213.194.52.64/28;
        217.32.105.96/27;
        217.35.209.64/26;
        217.35.209.202/32;
    }
    prefix-list ACL-122-bt-nmc-mgmt {
        62.6.69.88/29;
        62.6.69.96/29;
        62.6.69.112/28;
        62.6.69.128/28;
        62.80.64.0/24;
        62.80.66.128/28;
        62.134.38.0/25;
        62.239.34.0/24;
        62.239.35.98/31;
        62.239.35.128/27;
        81.146.75.0/27;
        147.149.52.0/24;
        147.150.52.0/24;
        147.151.39.224/27;
        147.151.61.0/25;
        147.151.77.0/24;
        147.151.102.0/24;
        147.151.107.0/24;
        147.151.170.0/24;
        147.151.204.0/24;
        147.151.205.0/24;
        162.54.52.0/24;
        168.125.7.0/28;
        168.125.7.212/32;
        168.125.240.0/23;
        193.113.36.0/24;
        193.203.132.0/28;
        194.72.6.64/27;
        194.72.6.112/28;
        194.72.6.176/29;
        194.72.6.208/28;
        194.74.74.160/27;
        194.74.74.195/32;
        194.74.75.0/24;
        194.74.76.32/27;
        194.74.80.0/24;
        194.74.81.89/32;
        194.102.6.0/24;
        194.102.7.133/32;
        194.102.7.141/32;
        194.102.19.0/24;
        195.100.115.0/28;
        195.171.36.64/27;
        195.182.110.224/27;
        195.182.112.192/26;
        195.182.114.192/27;
        212.31.215.192/28;
        212.31.215.240/28;
        212.162.213.229/32;
        212.162.213.241/32;
        213.194.52.64/28;
        217.32.105.96/27;
        217.35.209.64/26;
        217.35.209.202/32;
    }
    prefix-list ACL-123-bt-nmc-mgmt {
        62.6.69.88/29;
        62.6.69.96/29;
        62.6.69.112/28;
        62.6.69.128/28;
        62.80.64.0/24;
        62.80.66.128/28;
        62.134.38.0/25;
        62.239.34.0/24;
        62.239.35.98/31;
        62.239.35.128/27;
        81.146.75.0/27;
        147.149.52.0/24;
        147.150.52.0/24;
        147.151.39.224/27;
        147.151.61.0/25;
        147.151.77.0/24;
        147.151.102.0/24;
        147.151.107.0/24;
        147.151.170.0/24;
        147.151.204.0/24;
        147.151.205.0/24;
        162.54.52.0/24;
        168.125.7.0/28;
        168.125.7.212/32;
        168.125.240.0/23;
        193.113.36.0/24;
        193.203.132.0/28;
        194.72.6.64/27;
        194.72.6.112/28;
        194.72.6.176/29;
        194.72.6.208/28;
        194.74.74.160/27;
        194.74.74.195/32;
        194.74.75.0/24;
        194.74.76.32/27;
        194.74.80.0/24;
        194.74.81.89/32;
        194.102.6.0/24;
        194.102.7.133/32;
        194.102.7.141/32;
        194.102.19.0/24;
        195.100.115.0/28;
        195.171.36.64/27;
        195.182.110.224/27;
        195.182.112.192/26;
        195.182.114.192/27;
        212.31.215.192/28;
        212.31.215.240/28;
        212.162.213.229/32;
        212.162.213.241/32;
        213.194.52.64/28;
        217.32.105.96/27;
        217.35.209.64/26;
        217.35.209.202/32;
    }
    prefix-list deny-unb-unn-src-n-dst {
        62.6.69.88/29;
        62.6.69.112/28;
        62.6.69.128/28;
        62.80.64.0/24;
        62.80.66.128/28;
        62.134.38.0/25;
        81.146.75.0/27;
        147.149.52.0/24;
        147.150.52.0/24;
        147.151.39.224/27;
        147.151.61.0/25;
        147.151.77.0/24;
        147.151.102.0/24;
        147.151.107.0/24;
        147.151.170.0/24;
        147.151.204.0/24;
        147.151.205.0/24;
        168.125.7.0/28;
        168.125.240.0/23;
        172.31.31.128/25;
        193.113.36.0/24;
        193.203.132.0/28;
        194.74.80.0/24;
        195.100.115.0/28;
        195.171.36.64/27;
        195.182.110.224/27;
        195.182.112.192/26;
        195.182.114.192/27;
        213.194.52.64/28;
    }
    prefix-list deny-unb-unn-dst {
        62.102.96.0/23;
        62.102.98.0/23;
        208.163.212.0/23;
        208.163.218.0/23;
        208.163.222.0/23;
        210.7.129.0/24;
        210.7.130.0/23;
        212.31.214.0/24;
        212.31.215.0/25;
    }
    prefix-list ams-mgt-addr {
        212.31.215.240/28;
    }
    prefix-list ams-mgt2-addr {
        212.31.215.192/28;
    }
    prefix-list tfp-mgt-addr {
        162.54.52.0/24;
    }
    prefix-list ble-mgt-addr {
        62.6.69.96/29;
    }
    prefix-list atl-sdm-addr {
        168.125.7.212/32;
    }
    prefix-list tacacs-server1 {
        194.74.81.89/32;
    }
    prefix-list tacacs-server2 {
        212.162.213.241/32;
    }
    prefix-list ssh-addresses {
		172.16.0.0/12;
	}
	prefix-list fv-loop10s {
        62.7.128.0/19;
        62.172.20.0/22;
        81.146.74.0/24;
        81.146.76.0/22;
        81.146.96.0/19;
        212.140.82.0/23;
        212.140.84.0/22;
        213.1.134.0/23;
        213.1.136.0/23;
        213.120.46.0/23;
        213.120.136.0/23;
        213.121.44.0/23;
        213.121.58.0/23;
        213.121.60.0/23;
        213.122.70.0/23;
        213.122.152.0/23;
        213.122.206.0/23;
        213.123.76.0/23;
        217.32.116.0/23;
        217.32.136.0/23;
        217.36.184.0/22;
        217.46.0.0/21;
        217.46.28.0/23;
    }
    prefix-list temp-PE-loops {
        62.6.17.224/27;
    }
    prefix-list fv-wan-subnets {
        62.2.68.28/30;
        62.2.68.32/30;
        62.2.68.36/30;
        62.2.68.40/30;
        62.2.69.28/30;
        62.2.69.32/30;
        62.2.69.36/30;
        62.2.69.40/30;
        62.6.1.168/30;
        62.6.1.172/30;
        65.62.72.0/21;
        75.124.90.128/25;
        75.124.84.64/26;
        75.124.84.128/25;
        75.124.85.0/25;
        204.109.193.248/30;
        204.109.193.128/25;
        192.199.150.0/30;
        198.206.84.128/25;
    }
    prefix-list acl-out-fce-connection {
        126.0.0.0/12;
        152.100.0.0/16;
        65.62.128.0/17;
        65.63.128.0/17;
        67.57.0.0/17;
        130.224.0.0/17;
        192.209.128.0/17;
        198.231.128.0/17;
        206.56.0.0/17;
        65.63.0.0/18;
        67.57.192.0/18;
        130.224.192.0/18;
        198.210.128.0/18;
        65.62.0.0/19;
        65.63.96.0/19;
        67.56.0.0/19;
        67.56.96.0/19;
        67.56.224.0/19;
        130.224.160.0/19;
        198.206.96.0/19;
        198.210.192.0/19;
        65.62.32.0/20;
        65.62.48.0/20;
        67.56.80.0/20;
        67.56.208.0/20;
        130.224.144.0/20;
        198.206.64.0/20;
        198.210.224.0/20;
        67.57.152.0/21;
        67.57.132.0/22;
        198.206.80.0/22;
        198.206.92.0/22;
    }
    prefix-list grey-pe-wan-primary {
        204.109.193.249/32;
    }
    prefix-list grey-ce-wan-primary  {
        204.109.193.250/32;
    }
    prefix-list grey-pe-wan-secondary {
        192.199.150.1/32;
    }
    prefix-list grey-ce-wan-secondary {
        192.199.150.2/32;
    }
    prefix-list pink-pe-wan-primary {
        204.109.193.129/32;
    }
    prefix-list pink-ce-wan-primary  {
        204.109.193.130/32;
    }
    prefix-list pink-pe-wan-secondary {
        192.199.150.5/32;
    }
    prefix-list pink-ce-wan-secondary {
        192.199.150.6/32;
    }
    prefix-list cascaded-subnets_16 {
        172.21.0.0/16;
    }
    prefix-list cascaded-subnets_18 {
        172.21.192.0/18;
    }
    prefix-list mgmt-centre-subnets_16 {
        194.102.8.0/24;
        194.102.9.0/24;
        194.102.21.0/24;
        194.102.22.0/24;
        147.150.52.0/24;
        147.151.102.0/24;
        168.125.240.0/24;
        168.125.241.0/24;
        155.195.64.128/27;
        155.195.33.64/26;
        155.195.85.32/28;
        155.195.65.112/28;
    }
    prefix-list mgmt-centre-subnets_18 {
        62.6.69.128/28;
        81.146.75.0/27;
        62.6.69.96/29;
    }
    prefix-list finex-wan-primary {
        62.2.68.28/30;
    }
    prefix-list finex-pe-wan-primary {
        62.2.68.29/32;
    }
    prefix-list finex-ce-wan-primary  {
        62.2.68.30/32;
    }
    prefix-list finex-wan-secondary {
        62.2.69.28/30;
    }
    prefix-list finex-pe-wan-secondary {
        62.2.69.29/32;
    }
    prefix-list finex-ce-wan-secondary {
        62.2.69.30/32;
    }
    prefix-list acl-sv-testsan1-1 {
        10.0.0.1/32;
    }
    prefix-list acl-sv-testsan2-1 {
        10.0.0.2/32;
    }
    prefix-list acl-sv-testsan3-1 {
        10.0.0.3/32;
    }
    prefix-list acl-sv-testsan4-1 {
        10.0.0.4/32;
    }
    prefix-list acl-sv-testsan5-1 {
        10.0.0.5/32;
    }
    prefix-list acl-sv-testsan6-1 {
        10.0.0.6/32;
    }
    prefix-list acl-sv-ALL-TERP-TR-1 {
        67.57.140.0/23;
        67.57.140.0/26;
        67.57.142.0/24;
        75.124.82.64/26;
        75.124.82.192/26;
        75.124.83.0/26;
    }
    prefix-list acl-sv-ALL-DVBP-TR-1 {
        65.62.64.0/25;
        67.56.184.192/26;
        67.56.185.64/27;
        198.210.251.0/25;
        206.60.0.128/25;
    }
    prefix-list acl-sv-BDN-TR-1 {
        75.124.80.0/24;
        75.124.81.0/25;
        198.206.88.0/23;
    }
    prefix-list acl-sv-BDNBronze-TR-1 {
        75.124.82.128/28;
        75.124.130.128/27;
        75.124.130.160/28;
    }
    prefix-list acl-sv-DVBP-AMH-EU-TR-1 {
        198.210.248.64/26;
    }
    prefix-list acl-sv-DVBP-BDA-AM-TR-1 {
        65.62.66.0/27;
    }
    prefix-list acl-sv-DVBP-BRU-EU-TR-1 {
        65.62.64.192/27;
    }
    prefix-list acl-sv-DVBP-CAI-ME-TR-1 {
        65.62.67.0/27;
    }
    prefix-list acl-sv-DVBP-IST-ME-TR-1 {
        65.62.65.192/27;
    }
    prefix-list acl-sv-DVBP-JKT-AP-TR-1 {
        67.57.138.128/27;
    }
    prefix-list acl-sv-DVBP-LUX-EU-TR-1 {
        67.57.139.192/27;
    }
    prefix-list acl-sv-DVBP-MAD-EU-TR-1 {
        67.57.140.0/27;
    }
    prefix-list acl-sv-DVBP-MEX-AM-TR-1 {
        65.62.64.128/27;
    }
    prefix-list acl-sv-DVBP-MIL-EU-TR-1 {
        67.57.139.64/27;
    }
    prefix-list acl-sv-DVBP-MNL-AP-TR-1 {
        65.62.64.32/27;
    }
    prefix-list acl-sv-DVBP-MOS-EU-TR-1 {
        65.62.65.64/27;
    }
    prefix-list acl-sv-DVBP-ROA-EU-TR-1 {
        67.57.139.0/27;
    }
    prefix-list acl-sv-DVBP-SAO-AM-TR-1 {
        65.62.66.128/27;
    }
    prefix-list acl-sv-DVBP-SHA-AP-TR-1 {
        65.62.66.192/27;
    }
    prefix-list acl-sv-DVBP-TEL-ME-TR-1 {
        67.57.138.192/27;
    }
    prefix-list acl-sv-DVBP-TYO-AP-TR-1 {
        67.57.139.128/27;
    }
    prefix-list acl-sv-DVBP-VII-EU-TR-1 {
        65.62.66.64/27;
    }
    prefix-list acl-sv-RPlusRealtime-TR-1 {
        1.0.0.0/32;
        198.206.85.0/24;
        198.206.90.0/23;
        198.210.240.0/23;
        198.210.243.0/24;
        198.210.245.0/24;
        198.210.246.0/24;
        198.210.252.0/23;
        204.109.173.0/24;
        204.109.174.0/24;
        204.109.176.0/24;
        204.109.178.0/23;
    }
    prefix-list acl-sv-TerPriceDisHRWS-TR-1 {
        67.57.137.128/25;
        75.124.192.0/24;
        75.124.194.0/23;
        198.206.86.0/25;
        198.206.86.128/25;
        198.206.87.0/25;
    }
    prefix-list acl-sv-TERP-CHC-AM-TR-1 {
        65.62.68.64/26;
    }
    prefix-list acl-sv-TERP-LSW-EU-TR-1 {
        198.206.87.192/26;
    }
    prefix-list acl-sv-TERP-ZUR-EU-TR-1 {
        65.62.68.128/26;
    }
	policy-statement Australasia-hub-policy {
        term Australasia-hub-rt {
            from community Australasia-hub-rt;
            then accept;
        }
    }
    policy-statement BLUE-CORE-DIVERSITY {
        term term-1 {
            from community [ community-BLUE-CORE-DIVERSITY-1 community-BLUE-CORE-DIVERSITY-2 ];
            then accept;
        }
        term explicit-deny {
            then reject;
        }
    }
    policy-statement Belgium-hub-policy {
        term Belgium-hub-rt {
            from community Belgium-hub-rt;
            then accept;
        }
    }
    policy-statement CLEARINTERNALCOMM {
        term PE-VRF-loopbacks {
            from {
                protocol bgp;
                community [ BT-MPLS-PE-VRF-loopback UK-MPLS-PE-VRF-loopback ];
            }
            then reject;
        }
        term redis-static {
            from protocol static;
            then accept;
        }
        term clear-BT-communities {
            from protocol bgp;
            then {
                community delete BT-MPLS-customer-prefixes;
                community delete UK-MPLS-customer-prefixes;
                community delete all-RTs;
                community delete all-Origins;
                next term;
            }
        }
    }
    policy-statement CONNECTED-CONTAIN {
        term term-4 {
            from {
                prefix-list-filter ACL-8-loopback200 orlonger;
            }
            then {
                community set CONNECTED-CONTAIN-1;
                accept;
            }
        }
    }
    policy-statement CUSTOMER-BGP-DAMPING {
        term bgp-damping-policy {
            from policy bgp-damping-policy;
            then next term;
        }
        term evaluate-next {
            then next policy;
        }
    }
    policy-statement DEFAULTCEPEER {
        term PE-VRF-loopback {
            from {
                prefix-list-filter ACL-8-loopback200 orlonger;
            }
            then reject;
        }
        term 30-bt-nmc-mgmt {
            from {
                prefix-list-filter ACL-30-bt-nmc-mgmt orlonger;
            }
            then reject;
        }
        term 11-CE-mgmt-loopback {
            from {
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                local-preference 25;
                community set BT-MPLS-CE-loopback-SET;
                next policy;
            }
        }
        term 13-cascaded-mgmt {
            from {
                prefix-list-filter ACL-13-cascaded-mgmt orlonger;
            }
            then {
                community set BT-MPLS-cascaded-mgmt-SET;
                next policy;
            }
        }
        term last {
            then {
                community delete BT-MPLS-internal-wildcard;
                community delete UK-MPLS-internal-wildcard;
                community delete BT-MPLS-all-RTs;
                next term;
            }
        }
    }
    policy-statement DEFAULTSTATIC {
        term tag-35 {
            from {
                protocol static;
                tag 35;
            }
            then reject;
        }
        term 30-bt-nmc-mgmt {
            from {
                protocol static;
                prefix-list-filter ACL-30-bt-nmc-mgmt orlonger;
            }
            then {
                community set BT-MPLS-NMC-mgmt-SET;
                accept;
            }
        }
        term tag-6121 {
            from {
                protocol static;
                tag 6121;
            }
            then {
                community set BT-MPLS-blue-core-active-SET;
                community add Reuters-NAT-SET;
                accept;
            }
        }
        term tag-6122 {
            from {
                protocol static;
                tag 6122;
            }
            then {
                community set BT-MPLS-red-core-active-SET;
                community add Reuters-NAT-SET;
                accept;
            }
        }
        term tag-6123 {
            from {
                protocol static;
                tag 6123;
            }
            then {
                community set BT-MPLS-blue-core-diverse-SET;
                accept;
            }
        }
        term tag-6124 {
            from {
                protocol static;
                tag 6124;
            }
            then {
                community set BT-MPLS-red-core-diverse-SET;
                accept;
            }
        }
        term tag-6137 {
            from {
                protocol static;
                tag 6137;
            }
            then {
                community set Reuters-NAT-SET;
                accept;
            }
        }
    }
    policy-statement DENYBTPREFIX {
        term BT-private-prefixes {
            from {
                protocol bgp;
                community [ BT-MPLS-routes-wildcard UK-MPLS-routes-wildcard ];
            }
            then reject;
        }
        term redis-static {
            from protocol static;
            then accept;
        }
        term clear-BT-communities {
            from protocol bgp;
            then {
                community delete BT-MPLS-internal-wildcard;
                community delete UK-MPLS-internal-wildcard;
                community delete all-RTs;
                community delete all-Origins;
                next term;
            }
        }
    }
    policy-statement France-hub-policy {
        term France-hub-rt {
            from community France-hub-rt;
            then accept;
        }
    }
    policy-statement GCSC-Amsterdam-hub-policy {
        term GCSC-Amsterdam-hub-rt {
            from community GCSC-Amsterdam-hub-rt;
            then accept;
        }
    }
    policy-statement IMPORT-BTMPLS-MD-GW1 {
        term BT-MPLS-GW1 {
            from {
                protocol bgp;
                community BTMPLS-MD-GW1;
            }
            then {
                preference 169;
                accept;
            }
        }
    }
    policy-statement IMPORT-BTMPLS-MD-GW2 {
        term BT-MPLS-GW2 {
            from {
                protocol bgp;
                community BTMPLS-MD-GW2;
            }
            then {
                preference 169;
                accept;
            }
        }
    }
    policy-statement IMPORT-BTMPLS-MD-GW3 {
        term BT-MPLS-GW3 {
            from {
                protocol bgp;
                community BTMPLS-MD-GW3;
            }
            then {
                preference 169;
                accept;
            }
        }
    }
    policy-statement IMPORT-BTMPLS-MD-GW4 {
        term BT-MPLS-GW4 {
            from {
                protocol bgp;
                community BTMPLS-MD-GW4;
            }
            then {
                preference 169;
                accept;
            }
        }
    }
    policy-statement IMPORT-BTMPLS-MD-GW5 {
        term BT-MPLS-GW5 {
            from {
                protocol bgp;
                community BTMPLS-MD-GW5;
            }
            then {
                preference 169;
                accept;
            }
        }
    }
    policy-statement IMPORTINTGW-A-AMH-TFP-EU {
        term INTGW-A-AMH-EU {
            from {
                protocol bgp;
                community INTGW-A-AMH-EU;
            }
            then {
                preference 168;
                accept;
            }
        }
        term INTGW-A-TFP-EU {
            from {
                protocol bgp;
                community INTGW-A-TFP-EU;
            }
            then {
                preference 169;
                accept;
            }
        }
    }
    policy-statement IMPORTINTGW-A-SGP-SPT-AP {
        term INTGW-A-SGP-AP {
            from {
                protocol bgp;
                community INTGW-A-SGP-AP;
            }
            then {
                preference 168;
                accept;
            }
        }
        term INTGW-A-SPT-AP {
            from {
                protocol bgp;
                community INTGW-A-SPT-AP;
            }
            then {
                preference 169;
                accept;
            }
        }
    }
    policy-statement IMPORTINTGW-A-SNJ-STI-US {
        term INTGW-A-SNJ-US {
            from {
                protocol bgp;
                community INTGW-A-SNJ-US;
            }
            then {
                preference 168;
                accept;
            }
        }
        term INTGW-A-STI-US {
            from {
                protocol bgp;
                community INTGW-A-STI-US;
            }
            then {
                preference 169;
                accept;
            }
        }
    }
    policy-statement IMPORTINTGW-A-SPT-SGP-AP {
        term INTGW-A-SGP-AP {
            from {
                protocol bgp;
                community INTGW-A-SGP-AP;
            }
            then {
                preference 169;
                accept;
            }
        }
        term INTGW-A-SPT-AP {
            from {
                protocol bgp;
                community INTGW-A-SPT-AP;
            }
            then {
                preference 168;
                accept;
            }
        }
    }
    policy-statement IMPORTINTGW-A-STI-SNJ-US {
        term INTGW-A-STI-US {
            from {
                protocol bgp;
                community INTGW-A-STI-US;
            }
            then {
                preference 168;
                accept;
            }
        }
        term INTGW-A-SNJ-US {
            from {
                protocol bgp;
                community INTGW-A-SNJ-US;
            }
            then {
                preference 169;
                accept;
            }
        }
    }
    policy-statement IMPORTINTGW-A-TFP-AMH-EU {
        term INTGW-A-TFP-EU {
            from {
                protocol bgp;
                community INTGW-A-TFP-EU;
            }
            then {
                preference 168;
                accept;
            }
        }
        term INTGW-A-AMH-EU {
            from {
                protocol bgp;
                community INTGW-A-AMH-EU;
            }
            then {
                preference 169;
                accept;
            }
        }
    }
    policy-statement IMPORTINTGW-B-FRK-STK-EU {
        term INTGW-B-FRK-EU {
            from {
                protocol bgp;
                community INTGW-B-FRK-EU;
            }
            then {
                preference 168;
                accept;
            }
        }
        term INTGW-B-STK-EU {
            from {
                protocol bgp;
                community INTGW-B-STK-EU;
            }
            then {
                preference 169;
                accept;
            }
        }
    }
    policy-statement IMPORTINTGW-B-STK-FRK-EU {
        term INTGW-B-STK-EU {
            from {
                protocol bgp;
                community INTGW-B-STK-EU;
            }
            then {
                preference 168;
                accept;
            }
        }
        term INTGW-B-FRK-EU {
            from {
                protocol bgp;
                community INTGW-B-FRK-EU;
            }
            then {
                preference 169;
                accept;
            }
        }
    }
    policy-statement Irish-hub-policy {
        term Irish-hub-rt {
            from community Irish-hub-rt;
            then accept;
        }
    }
    policy-statement NAMngt-hub-policy {
        term NAMngt-hub-rt {
            from community NAMngt-hub-rt;
            then accept;
        }
    }
    policy-statement Netherlands-mgnt-hub-policy {
        term Netherlands-mgnt-hub-rt {
            from community Netherlands-mgnt-hub-rt;
            then accept;
        }
    }
    policy-statement RED-CORE-DIVERSITY {
        term term-1 {
            from community [ community-RED-CORE-DIVERSITY-1 community-RED-CORE-DIVERSITY-2 ];
            then accept;
        }
        term explicit-deny {
            then reject;
        }
    }
    policy-statement SET-COMMUNITY-GW1 {
        term PE-VRF-loopback {
            from {
                prefix-list-filter ACL-8-loopback200 orlonger;
            }
            then reject;
        }
        term 30-bt-nmc-mgmt {
            from {
                prefix-list-filter ACL-30-bt-nmc-mgmt orlonger;
            }
            then reject;
        }
        term 11-CE-mgmt-loopback {
            from {
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                local-preference 25;
                community set BT-MPLS-CE-loopback-SET;
                next policy;
            }
        }
        term 13-cascaded-mgmt {
            from {
                prefix-list-filter ACL-13-cascaded-mgmt orlonger;
            }
            then {
                community set BT-MPLS-cascaded-mgmt-SET;
                next policy;
            }
        }
        term set-gw-community {
            then {
                preference 169;
                community delete BT-MPLS-internal-wildcard;
                community delete UK-MPLS-internal-wildcard;
                community delete BT-MPLS-all-RTs;
                community add BTMPLS-MD-GW1-SET;
                next term;
            }
        }
    }
    policy-statement SET-COMMUNITY-GW2 {
        term PE-VRF-loopback {
            from {
                prefix-list-filter ACL-8-loopback200 orlonger;
            }
            then reject;
        }
        term 30-bt-nmc-mgmt {
            from {
                prefix-list-filter ACL-30-bt-nmc-mgmt orlonger;
            }
            then reject;
        }
        term 11-CE-mgmt-loopback {
            from {
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                local-preference 25;
                community set BT-MPLS-CE-loopback-SET;
                next policy;
            }
        }
        term 13-cascaded-mgmt {
            from {
                prefix-list-filter ACL-13-cascaded-mgmt orlonger;
            }
            then {
                community set BT-MPLS-cascaded-mgmt-SET;
                next policy;
            }
        }
        term set-gw-community {
            then {
                preference 169;
                community delete BT-MPLS-internal-wildcard;
                community delete UK-MPLS-internal-wildcard;
                community delete BT-MPLS-all-RTs;
                community add BTMPLS-MD-GW2-SET;
                next term;
            }
        }
    }
    policy-statement SET-COMMUNITY-GW3 {
        term PE-VRF-loopback {
            from {
                prefix-list-filter ACL-8-loopback200 orlonger;
            }
            then reject;
        }
        term 30-bt-nmc-mgmt {
            from {
                prefix-list-filter ACL-30-bt-nmc-mgmt orlonger;
            }
            then reject;
        }
        term 11-CE-mgmt-loopback {
            from {
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                local-preference 25;
                community set BT-MPLS-CE-loopback-SET;
                next policy;
            }
        }
        term 13-cascaded-mgmt {
            from {
                prefix-list-filter ACL-13-cascaded-mgmt orlonger;
            }
            then {
                community set BT-MPLS-cascaded-mgmt-SET;
                next policy;
            }
        }
        term set-gw-community {
            then {
                preference 169;
                community delete BT-MPLS-internal-wildcard;
                community delete UK-MPLS-internal-wildcard;
                community delete BT-MPLS-all-RTs;
                community add BTMPLS-MD-GW3-SET;
                next term;
            }
        }
    }
    policy-statement SET-COMMUNITY-GW4 {
        term PE-VRF-loopback {
            from {
                prefix-list-filter ACL-8-loopback200 orlonger;
            }
            then reject;
        }
        term 30-bt-nmc-mgmt {
            from {
                prefix-list-filter ACL-30-bt-nmc-mgmt orlonger;
            }
            then reject;
        }
        term 11-CE-mgmt-loopback {
            from {
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                local-preference 25;
                community set BT-MPLS-CE-loopback-SET;
                next policy;
            }
        }
        term 13-cascaded-mgmt {
            from {
                prefix-list-filter ACL-13-cascaded-mgmt orlonger;
            }
            then {
                community set BT-MPLS-cascaded-mgmt-SET;
                next policy;
            }
        }
        term set-gw-community {
            then {
                preference 169;
                community delete BT-MPLS-internal-wildcard;
                community delete UK-MPLS-internal-wildcard;
                community delete BT-MPLS-all-RTs;
                community add BTMPLS-MD-GW4-SET;
                next term;
            }
        }
    }
    policy-statement SET-COMMUNITY-GW5 {
        term PE-VRF-loopback {
            from {
                prefix-list-filter ACL-8-loopback200 orlonger;
            }
            then reject;
        }
        term 30-bt-nmc-mgmt {
            from {
                prefix-list-filter ACL-30-bt-nmc-mgmt orlonger;
            }
            then reject;
        }
        term 11-CE-mgmt-loopback {
            from {
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                local-preference 25;
                community set BT-MPLS-CE-loopback-SET;
                next policy;
            }
        }
        term 13-cascaded-mgmt {
            from {
                prefix-list-filter ACL-13-cascaded-mgmt orlonger;
            }
            then {
                community set BT-MPLS-cascaded-mgmt-SET;
                next policy;
            }
        }
        term set-gw-community {
            then {
                preference 169;
                community delete BT-MPLS-internal-wildcard;
                community delete UK-MPLS-internal-wildcard;
                community delete BT-MPLS-all-RTs;
                community add BTMPLS-MD-GW5-SET;
                next term;
            }
        }
    }
    policy-statement SET-NEXT-HOP {
        term term-1 {
            from policy RED-CORE-DIVERSITY;
            then accept;
        }
        term term-2 {
            from policy BLUE-CORE-DIVERSITY;
            then accept;
        }
        term term-3 {
            then {
                next-hop self;
                accept;
            }
        }
    }
    policy-statement SETLOCALPREFRA {
        term tag-35 {
            from {
                protocol static;
                tag 35;
            }
            then reject;
        }
        term 13-cascaded-mgmt {
            from {
                protocol static;
                prefix-list-filter ACL-13-cascaded-mgmt orlonger;
            }
            then {
                community set BT-MPLS-cascaded-mgmt-SET;
                accept;
            }
        }
        term tag-101 {
            from {
                protocol static;
                tag 101;
            }
            then {
                local-preference 50;
                accept;
            }
        }
        term static {
            from protocol static;
            then {
                local-preference 100;
                accept;
            }
        }
    }
    policy-statement SETLOCALPREFRA-GW1 {
        term tag-35 {
            from {
                protocol static;
                tag 35;
            }
            then reject;
        }
        term tag-101 {
            from {
                protocol static;
                tag 101;
            }
            then {
                local-preference 50;
                community add BTMPLS-MD-GW1-SET;
                accept;
            }
        }
        term static {
            from protocol static;
            then {
                local-preference 100;
                community add BTMPLS-MD-GW1-SET;
                accept;
            }
        }
    }
    policy-statement SETLOCALPREFRA-GW2 {
        term tag-35 {
            from {
                protocol static;
                tag 35;
            }
            then reject;
        }
        term tag-101 {
            from {
                protocol static;
                tag 101;
            }
            then {
                local-preference 50;
                community add BTMPLS-MD-GW2-SET;
                accept;
            }
        }
        term static {
            from protocol static;
            then {
                local-preference 100;
                community add BTMPLS-MD-GW2-SET;
                accept;
            }
        }
    }
    policy-statement SETLOCALPREFRA-GW3 {
        term tag-35 {
            from {
                protocol static;
                tag 35;
            }
            then reject;
        }
        term tag-101 {
            from {
                protocol static;
                tag 101;
            }
            then {
                local-preference 50;
                community add BTMPLS-MD-GW3-SET;
                accept;
            }
        }
        term static {
            from protocol static;
            then {
                local-preference 100;
                community add BTMPLS-MD-GW3-SET;
                accept;
            }
        }
    }
    policy-statement SETLOCALPREFRA-GW4 {
        term tag-35 {
            from {
                protocol static;
                tag 35;
            }
            then reject;
        }
        term tag-101 {
            from {
                protocol static;
                tag 101;
            }
            then {
                local-preference 50;
                community add BTMPLS-MD-GW4-SET;
                accept;
            }
        }
        term static {
            from protocol static;
            then {
                local-preference 100;
                community add BTMPLS-MD-GW4-SET;
                accept;
            }
        }
    }
    policy-statement SETLOCALPREFRA-GW5 {
        term tag-35 {
            from {
                protocol static;
                tag 35;
            }
            then reject;
        }
        term tag-101 {
            from {
                protocol static;
                tag 101;
            }
            then {
                local-preference 50;
                community add BTMPLS-MD-GW5-SET;
                accept;
            }
        }
        term static {
            from protocol static;
            then {
                local-preference 100;
                community add BTMPLS-MD-GW5-SET;
                accept;
            }
        }
    }
    policy-statement SETPELOCALPREFIN {
        term PE-VRF-loopback {
            from {
                prefix-list-filter ACL-8-loopback200 orlonger;
            }
            then reject;
        }
        term 30-bt-nmc-mgmt {
            from {
                prefix-list-filter ACL-30-bt-nmc-mgmt orlonger;
            }
            then reject;
        }
        term 11-CE-mgmt-loopback {
            from {
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                local-preference 25;
                community set BT-MPLS-CE-loopback-SET;
                accept;
            }
        }
        term 13-cascaded-mgmt {
            from {
                prefix-list-filter ACL-13-cascaded-mgmt orlonger;
            }
            then {
                local-preference 50;
                community set BT-MPLS-cascaded-mgmt-SET;
                accept;
            }
        }
        term set-local-pref {
            then {
                local-preference 50;
                community delete BT-MPLS-internal-wildcard;
                community delete UK-MPLS-internal-wildcard;
                community delete BT-MPLS-all-RTs;
                next term;
            }
        }
    }
    policy-statement Spanish-hub-policy {
        term Spanish-hub-rt {
            from community Spanish-hub-rt;
            then accept;
        }
    }
    policy-statement bgp-damping-policy {
        term always-damp {
            then {
                damping bgp-damping;
                accept;
            }
        }
    }
    policy-statement bgp-policies-RR-group-import {
        term call-damping-policy {
            from policy bgp-damping-policy;
            then next term;
        }
        term explicit-default-action {
            then next policy;
        }
    }
    policy-statement btgr-mgmt-hub-policy {
        term btgr-mgmt-hub-rt {
            from community btgr-mgmt-hub-rt;
            then accept;
        }
    }
    policy-statement btin-mgmt-hub-policy {
        term btin-mgmt-hub-rt {
            from community btin-mgmt-hub-rt;
            then accept;
        }
    }
    policy-statement btpolicy-mgnt-hub-policy {
        term btrt-mgnt-hub-rt {
            from community btrt-mgnt-hub-rt;
            then accept;
        }
    }
    policy-statement buda-shared-hub-policy {
        term buda-shared-hub-rt {
            from community buda-shared-hub-rt;
            then accept;
        }
    }
    policy-statement default-reject-all {
        then reject;
    }
    policy-statement dummy_vrf_export {
        term direct {
            from {
                protocol direct;
                policy CONNECTED-CONTAIN;
            }
            then {
                community add dummy_vrf_export_rt_set;
                accept;
            }
        }
    }
    policy-statement dummy_vrf_import {
        term bgp-routes {
            from {
                protocol bgp;
                community dummy_vrf_import_rt_set;
            }
            then accept;
        }
    }
    policy-statement load-balancing-policy {
        then {
            load-balance per-packet;
        }
    }
    policy-statement TR_grey_import_map {
        term accept-TR-perf-polling-hub {
            from {
                protocol bgp;
                community TR-perf-polling-hub-rt;
            }
            then accept;
        }
        term accept-PoP-SAA {
            from {
                protocol bgp;
                community pop-saa-rt;
            }
            then accept;
        }
        term accept-btrt-hub {
            from {
                protocol bgp;
                community btrt-mgnt-hub-rt;
            }
            then accept;
        }
        term explicit-deny {
            then reject;
        }
    }
    policy-statement fce_only_grey_import_map {
        term accept-fce-perf-polling-hub {
            from {
                protocol bgp;
                community fce-only-perf-polling-hub-rt;
            }
            then accept;
        }
        term accept-PoP-SAA {
            from {
                protocol bgp;
                community pop-saa-rt;
            }
            then accept;
        }
        term accept-btrt-hub {
            from {
                protocol bgp;
                community btrt-mgnt-hub-rt;
            }
            then accept;
        }
        term explicit-deny {
            then reject;
        }
    }
    policy-statement TR_grey_export_map {
        term static-other-lo10 {
            from {
                protocol static;
                tag 4000;
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                local-preference 0;
                community add TR-perf-polling-spoke-rt;
                community add btrt-mgnt-spoke-rt;
                accept;
            }
        }
        term static-ACL-11 {
            from {
                protocol static;
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                community add TR-perf-polling-spoke-rt;
                community add btrt-mgnt-spoke-rt;
                community add regional-saa-spoke-rt;
                accept;
            }
        }
        term bgp-own-lo10 {
            from {
                protocol bgp;
                community grey-own-loopback10;
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                local-preference 200;
                community add TR-perf-polling-spoke-rt;
                community add btrt-mgnt-spoke-rt;
                community add regional-saa-spoke-rt;
                accept;
            }
        }
        term bgp-other-lo10 {
            from {
                protocol bgp;
                community grey-other-loopback10;
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                local-preference 150;
                community add TR-perf-polling-spoke-rt;
                community add btrt-mgnt-spoke-rt;
                accept;
            }
        }
        term any-ACL11 {
            from {
                protocol bgp;
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                community add TR-perf-polling-spoke-rt;
                community add btrt-mgnt-spoke-rt;
                community add regional-saa-spoke-rt;
                accept;
            }
        }
        term explicit-deny {
            then reject;
        }
    }
    policy-statement fce_only_grey_export_map {
        term static-other-lo10 {
            from {
                protocol static;
                tag 4000;
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                local-preference 0;
                community add fce-only-perf-polling-spoke-rt;
                community add btrt-mgnt-spoke-rt;
                accept;
            }
        }
        term static-ACL-11 {
            from {
                protocol static;
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                community add fce-only-perf-polling-spoke-rt;
                community add btrt-mgnt-spoke-rt;
                community add regional-saa-spoke-rt;
                accept;
            }
        }
        term bgp-own-lo10 {
            from {
                protocol bgp;
                community grey-own-loopback10;
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                local-preference 200;
                community add fce-only-perf-polling-spoke-rt;
                community add btrt-mgnt-spoke-rt;
                community add regional-saa-spoke-rt;
                accept;
            }
        }
        term bgp-other-lo10 {
            from {
                protocol bgp;
                community grey-other-loopback10;
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                local-preference 150;
                community add fce-only-perf-polling-spoke-rt;
                community add btrt-mgnt-spoke-rt;
                accept;
            }
        }
        term any-ACL11 {
            from {
                protocol bgp;
                prefix-list-filter ACL-11-CE-mgmt-loopbacks orlonger;
            }
            then {
                community add fce-only-perf-polling-spoke-rt;
                community add btrt-mgnt-spoke-rt;
                community add regional-saa-spoke-rt;
                accept;
            }
        }
        term explicit-deny {
            then reject;
        }
    }
    policy-statement pink_import_map {
        term VPN-routes {
            from {
                protocol bgp;
                community pink-hub-rt;
            }
            then accept;
        }
        term explicit-deny {
            then reject;
        }
    }
    policy-statement pink_export_map {
        term tag-101 {
           from {
              protocol static;
              tag 101;
           }
           then {
               local-preference 50;
               next term;
           }
       
        }
        term static {
            from {
                protocol static;
            }
            then {
                community add pink-spoke-rt;
                accept;
            }
        }
        term explicit-deny {
            then reject;
        }
    }
    policy-statement DENYBTPREFIX-SPRING {
        term BT-private-prefixes-spring {
            from {
                protocol bgp;
                community [ BT-MPLS-routes-wildcard UK-MPLS-routes-wildcard btr-loopback-feheadend ];
            }
            then reject;
        }
        term redis-static {
            from protocol static;
            then accept;
        }
        term clear-BT-communities {
            then {
                community delete BT-MPLS-internal-wildcard;
                community delete UK-MPLS-internal-wildcard;
                community delete all-Origins;
                community delete all-RTs;
                accept;
            }
        }
    }
	policy-statement ibgp-set-next-hop-self {
        term VPN-routes {
            from {
                protocol bgp;
            }
            then {
                next-hop self;
                accept;
            }
        }
    }
	policy-statement deny-all {
            then {
                reject;
        }
    }
    community Australasia-hub-rt members target:12641:1587;
	community Australasia-spoke-rt members target:12641:1539;
	community BT-MPLS-CE-loopback members "^12641:65050$";
	community BTMPLS-MD-GW1 members "^12641:9350$";
	community BTMPLS-MD-GW2 members "^12641:9351$";
	community BTMPLS-MD-GW3 members "^12641:9352$";
	community BTMPLS-MD-GW4 members "^12641:9353$";
	community BTMPLS-MD-GW5 members "^12641:9354$";
	community BT-MPLS-PE-VRF-loopback members "^12641:65010$";
	community BT-MPLS-all-RTs members "target:(12641|2856):.*";
	community BT-MPLS-all-wildcard members 12641:.*;
	community all-RTs members "target:.*:.*";
	community all-BT-Origins members "origin:(12641|2856):.*";
	community all-Origins members "origin:.*:.*";
	community BT-MPLS-customer-prefixes members "^12641:[8-9]...$";
	community BT-MPLS-internal-wildcard members "^12641:([1-57-9].*|6.{0,2}|6.{4,})$";
	community BT-MPLS-routes-wildcard members "^12641:650..$";
	community BT-MPLS-NMC-mgmt members "^12641:65020$";
	community Belgium-hub-rt members target:12641:448;
	community Belgium-spoke-rt members target:12641:449;
	community BT-MPLS-PE-CE-Interface members "^12641:6100$";
	community BT-MPLS-blue-core-active members "^12641:6121$";
	community BT-MPLS-red-core-active members "^12641:6122$";
	community BT-MPLS-blue-core-diverse members "^12641:6123$";
	community BT-MPLS-red-core-diverse members "^12641:6124$";
	community Reuters-NAT members "^16579:3001$";
	community France-hub-rt members target:12641:1634;
	community France-spoke-rt members target:12641:1635;
	community GCSC-Amsterdam-hub-rt members target:12641:520;
	community GCSC-Amsterdam-spoke-rt members target:12641:521;
	community Irish-hub-rt members target:12641:530;
	community Irish-spoke-rt members target:12641:531;
	community NAMngt-hub-rt members target:12641:808;
	community NAMngt-spoke-rt members target:12641:809;
	community Netherlands-mgnt-hub-rt members target:12641:464;
	community Netherlands-mgnt-spoke-rt members target:12641:465;
	community Reuters-Spring members "^30240:6001$";
	community Spanish-hub-rt members target:12641:976;
	community Spanish-spoke-rt members target:12641:977;
	community UK-MPLS-PE-VRF-loopback members "^2856:65010$";
	community UK-MPLS-all-wildcard members 2856:.*;
	community UK-MPLS-customer-prefixes members "^2856:[8-9]...$";
	community UK-MPLS-internal-wildcard members "^2856:([1-57-9].*|6.{0,2}|6.{4,})$";
	community UK-MPLS-routes-wildcard members "^2856:650..$";
	community btgr-mgmt-hub-rt members target:12641:326;
	community btgr-mgmt-spoke-rt members target:12641:327;
	community btin-mgmt-hub-rt members target:12641:256;
	community btin-mgmt-spoke-rt members target:12641:257;
	community btrt-mgnt-hub-rt members target:12641:370;
	community btrt-mgnt-spoke-rt members target:12641:371;
	community buda-shared-hub-rt members target:12641:9243;
	community buda-shared-spoke-rt members target:12641:9244;
	community BT-MPLS-cascaded-mgmt members "^12641:65055$";
	community INTGW-A-TFP-EU members "^12641:1100$";
	community INTGW-A-AMH-EU members "^12641:1101$";
	community INTGW-A-STI-US members "^12641:1102$";
	community INTGW-A-SNJ-US members "^12641:1103$";
	community INTGW-B-FRK-EU members "^12641:1104$";
	community INTGW-B-STK-EU members "^12641:1105$";
	community INTGW-A-SGP-AP members "^12641:1106$";
	community INTGW-A-SPT-AP members "^12641:1107$";
	community BT-MPLS-PE-VRF-loopback-SET members 12641:65010;
	community BT-MPLS-NMC-mgmt-SET members 12641:65020;
	community BT-MPLS-CE-loopback-SET members 12641:65050;
	community BT-MPLS-cascaded-mgmt-SET members 12641:65055;
	community BT-MPLS-PE-CE-Interface-SET members 12641:6100;
	community BT-MPLS-blue-core-active-SET members 12641:6121;
	community BT-MPLS-red-core-active-SET members 12641:6122;
	community BT-MPLS-blue-core-diverse-SET members 12641:6123;
	community BT-MPLS-red-core-diverse-SET members 12641:6124;
	community Reuters-NAT-SET members 16579:3001;
	community BTMPLS-MD-GW1-SET members 12641:9350;
	community BTMPLS-MD-GW2-SET members 12641:9351;
	community BTMPLS-MD-GW3-SET members 12641:9352;
	community BTMPLS-MD-GW4-SET members 12641:9353;
	community BTMPLS-MD-GW5-SET members 12641:9354;
	community UK-MPLS-PE-VRF-loopback-SET members 2856:65010;
	community INTGW-A-TFP-EU-SET members 12641:1100;
	community INTGW-A-AMH-EU-SET members 12641:1101;
	community INTGW-A-STI-US-SET members 12641:1102;
	community INTGW-A-SNJ-US-SET members 12641:1103;
	community INTGW-B-FRK-EU-SET members 12641:1104;
	community INTGW-B-STK-EU-SET members 12641:1105;
	community INTGW-A-SGP-AP-SET members 12641:1106;
	community INTGW-A-SPT-AP-SET members 12641:1107;
    community community-BLUE-CORE-DIVERSITY-1 members 2856:6123;
    community community-BLUE-CORE-DIVERSITY-2 members 12641:6123;
    community community-RED-CORE-DIVERSITY-1 members 2856:6124;
    community community-RED-CORE-DIVERSITY-2 members 12641:6124;
	community dummy_vrf_export_rt_set members target:12641:9037;
	community dummy_vrf_import_rt_set members target:12641:9037;
	community grey-own-loopback10 members [ 12641:65050 12641:65051 ];
    community grey-other-loopback10 members [ 12641:65050 12641:65052 ];
    community grey-loopback12 members [ 12641:65050 12641:65053 ];
    community FE-FCE-CLIENT-COM members 16579:1001;
    community FE-FCE-PROVIDER-COM members 16579:1000;
    community FE-FCE-CLIENT-AND-PROVIDER-COM members [ 16579:1000 16579:1001 ];
    community FE-TR-CLIENT-COM members 16579:3001;
    community TR-PROVIDER-COM members 16579:3000;
    community FV-COMMUNITY-SET members 12641:6125;
    community btr-loopback-feheadend members 30240:6001;
    community FE-PRIMARY-COM members 12641:6128;
    community FE-SECONDARY-COM members 12641:6129;
    community FE-TOPOLOGY-SEC-PLUS-COM members 12641:6130;
    community FE-TOPOLOGY-SEC-PLUS-SPLIT-COM members 12641:6131;
    community FE-TOPOLOGY-SEC-COM members 12641:6132;
    community FE-TOPOLOGY-SEC-SPLIT-COM members 12641:6133;
    community FE-TOPOLOGY-STANDARD-COM members 12641:6134;
    community FE-CUST-L2-COM members 12641:6135;
	community fce-only-perf-polling-hub-rt members target:12641:902017;
    community fce-only-perf-polling-spoke-rt members target:12641:902018;
    community TR-perf-polling-hub-rt members target:12641:9501; 
    community TR-perf-polling-spoke-rt members target:12641:9502;
	community pink-hub-rt members target:12641:9660;
    community pink-spoke-rt members target:12641:9659;
	community TR-provider-agg-RTs members target:12641:900651;
    community FCE-provider-agg-RTs members target:12641:900653;
    community RT-community-12641:9685 members target:12641:9685;
    community RT-community-12641:900649 members target:12641:900649;	
	community CONNECTED-CONTAIN-1 members 12641:65010;
	community Generic_Provider_Cos-FCE_rt members target:12641:901000;
	community Fix_SAN_rt members target:12641:901001;
	community AF1_SAN_rt members target:12641:901002;
	community AF2_SAN_rt members target:12641:901003;
	damping bgp-damping {
        half-life 1;
        reuse 1500;
        suppress 4100;
        max-suppress 4;
    }
}
class-of-service {
    classifiers {
        exp BT_mpls_core_exp_ba_classifier {
            forwarding-class FC-Q5 {
                loss-priority low code-points 100;
            }
            forwarding-class FC-Q6 {
                loss-priority low code-points 110;
                loss-priority high code-points 010;
            }
            forwarding-class FC-Q4 {
                loss-priority low code-points 101;
                loss-priority high code-points [ 001 011 111 ];
            }
            forwarding-class FC-EXP0-Q4 {
                loss-priority high code-points 000;
            }
        }
        dscp tx-vrf-lt-classifier {
            forwarding-class FC-Q7 {
                loss-priority low code-points 011010;
                loss-priority medium-low code-points 011100;
                loss-priority low code-points 011110;
            }
        }
        inet-precedence BT_mpls_core_prec_ba_classifier {
            forwarding-class FC-Q6 {
                loss-priority low code-points 110;
                loss-priority high code-points [ 010 100 ];
            }
            forwarding-class FC-Q4 {
                loss-priority low code-points [ 000 101 111 ];
                loss-priority high code-points 001;
            }
            forwarding-class FC-Q7 {
                loss-priority low code-points 011;
            }
        }
    }
    host-outbound-traffic {
        forwarding-class FC-Q3;
        dscp-code-point 110000;
    }
    drop-profiles {
        DPC-in-contract {
            fill-level 62 drop-probability 0;
            fill-level 99 drop-probability 10;
        }
        DPC-out-contract {
            fill-level 19 drop-probability 0;
            fill-level 50 drop-probability 20;
        }
        IQ2-in-contract {
            fill-level 62 drop-probability 0;
            fill-level 99 drop-probability 10;
        }
        IQ2-out-contract {
            fill-level 19 drop-probability 0;
            fill-level 50 drop-probability 20;
        }
        traffic-in-contract-drop-profile {
            fill-level 62 drop-probability 0;
            fill-level 99 drop-probability 10;
        }
        traffic-out-contract-drop-profile {
            fill-level 19 drop-probability 0;
            fill-level 50 drop-probability 20;
        }
        IQE-traffic-in-contract-drop-profile {
            interpolate {
                fill-level [ 62 99 100 ];
                drop-probability [ 0 10 100 ];
            }
        }
        IQE-traffic-out-contract-drop-profile {
            interpolate {
                fill-level [ 19 50 51 ];
                drop-probability [ 0 20 100 ];
            }
        }
        FPC-in-contract {
            interpolate {
                fill-level [ 62 99 100 ];
                drop-probability [ 0 10 100 ];
            }
        }
        FPC-out-contract {
            interpolate {
                fill-level [ 19 50 51 ];
                drop-probability [ 0 20 100 ];
            }
        }
		afx1_traffic_in-contract_drop_profile {
	        fill-level 50 drop-probability 0;
	        fill-level 99 drop-probability 10;
	    }
	    afx2_traffic_near-contract_drop_profile {
	        fill-level 15 drop-probability 0;
	        fill-level 40 drop-probability 10;
	    }
	    afx3_traffic_out-contract_drop_profile {
	        fill-level 6 drop-probability 0;
	        fill-level 14 drop-probability 20;
	    }
    }
    forwarding-classes {
        class FC-Q0 queue-num 0;
        class FC-Q1 queue-num 1;
        class FC-Q2 queue-num 2;
        class FC-Q3 queue-num 3;
        class FC-Q4 queue-num 4;
        class FC-Q5 queue-num 5;
        class FC-Q6 queue-num 6;
        class FC-Q7 queue-num 7;
        class FC-EXP0-Q4 queue-num 4;
        class FC-Q4-Bleach queue-num 4;
    }
    routing-instances {
        all {
            classifiers {
                exp BT_mpls_core_exp_ba_classifier;
            }
        }
    }
    rewrite-rules {
        dscp BT_mpls_core_dscp_rewrite {
            forwarding-class FC-Q4-Bleach {
                loss-priority low code-point 000000;
            }
        }
        exp BT_mpls_core_exp_rewrite {
            forwarding-class FC-Q4 {
                loss-priority low code-point 101;
                loss-priority high code-point 001;
            }
            forwarding-class FC-Q5 {
                loss-priority low code-point 100;
            }
            forwarding-class FC-Q6 {
                loss-priority low code-point 110;
                loss-priority high code-point 010;
            }
            forwarding-class FC-EXP0-Q4 {
                loss-priority high code-point 000;
            }
            forwarding-class FC-Q4-Bleach {
                loss-priority low code-point 101;
            }
        }
    }
    scheduler-maps {
		scheduler_map_chassis_10Gbps_cpa_cppc_LAN {
			forwarding-class FC-Q5 scheduler Class1_EF_10Gbps_cpa_cppc_LAN_chassis;
			forwarding-class FC-Q6 scheduler Class2_AFx_10Gbps_cpa_cppc_LAN;
			forwarding-class FC-Q7 scheduler Multicast_10Gbps_cpa_cppc_LAN;
			forwarding-class FC-Q4 scheduler Default_10Gbps_cpa_cppc_LAN;
			forwarding-class FC-Q3 scheduler DPC-core_cntrl;
		}
		scheduler_map_10Gbps_cpa_cppc_LAN {
			forwarding-class FC-Q5 scheduler Class1_EF_10Gbps_cpa_cppc_LAN;
			forwarding-class FC-Q6 scheduler Class2_AFx_10Gbps_cpa_cppc_LAN;
			forwarding-class FC-Q7 scheduler Multicast_10Gbps_cpa_cppc_LAN;
			forwarding-class FC-Q4 scheduler Default_10Gbps_cpa_cppc_LAN;
			forwarding-class FC-Q3 scheduler DPC-core_cntrl;
		}
        scheduler_map_chassis_1Gbps_cpa_cppc {
            forwarding-class FC-Q5 scheduler Class_EF_1Gbps_cpa_cppc_71percent;
            forwarding-class FC-Q6 scheduler Class_AF4_1Gbps_cpa_cppc_6percent;
            forwarding-class FC-Q7 scheduler Class_AF3_1Gbps_cpa_cppc_6percent;
            forwarding-class FC-Q2 scheduler Class_AF2_1Gbps_cpa_cppc_6percent;
            forwarding-class FC-Q1 scheduler Class_AF1_1Gbps_cpa_cppc_6percent;
            forwarding-class FC-Q4 scheduler Class_BE_1Gbps_cpa_cppc_3percent;
            forwarding-class FC-Q3 scheduler Class_Cntrl_1Gbps_cpa_cppc_1percent;
            forwarding-class FC-Q0 scheduler Class_Mgmt_1Gbps_cpa_cppc_1percent;
        }
        scheduler_map_chassis_leased_line_cpa_cppc {
            forwarding-class FC-Q0 scheduler Class_Mgmt_leased_line_cpa_cppc_1percent;
            forwarding-class FC-Q3 scheduler Class_Cntrl_leased_line_cpa_cppc_1percent;
            forwarding-class FC-Q5 scheduler Class_EF_leased_line_cpa_cppc_92percent;
            forwarding-class FC-Q6 scheduler Class_AF4_leased_line_cpa_cppc_1percent;
            forwarding-class FC-Q7 scheduler Class_AF3_leased_line_cpa_cppc_1percent;
            forwarding-class FC-Q2 scheduler Class_AF2_leased_line_cpa_cppc_1percent;
            forwarding-class FC-Q1 scheduler Class_AF1_leased_line_cpa_cppc_1percent;
            forwarding-class FC-Q4 scheduler Class_BE_leased_line_cpa_cppc_1percent;
        }
        grey-SOUT-100k {
            forwarding-class FC-Q1 scheduler grey_probe_100k;
            forwarding-class FC-Q4 scheduler grey_bulk_100k;
            forwarding-class FC-Q3 scheduler grey_control_100k;
        }
        grey-SOUT-500k {
            forwarding-class FC-Q1 scheduler grey_probe_500k;
            forwarding-class FC-Q4 scheduler grey_bulk_500k;
            forwarding-class FC-Q3 scheduler grey_control_500k;
        }
    }
    schedulers {
		Class1_EF_10Gbps_cpa_cppc_LAN_chassis {
		    transmit-rate percent 50 rate-limit;
		    priority high;                      
		}
		Class1_EF_10Gbps_cpa_cppc_LAN {
		    transmit-rate percent 50 rate-limit;
		    buffer-size temporal 10k;
		    priority high;
		}
		Class2_AFx_10Gbps_cpa_cppc_LAN {
		    transmit-rate percent 29;
		    buffer-size temporal 192;
		    priority low;
		    drop-profile-map loss-priority low protocol any drop-profile DPC-in-contract;
		    drop-profile-map loss-priority high protocol any drop-profile DPC-out-contract;
		}
		Multicast_10Gbps_cpa_cppc_LAN {
		    transmit-rate percent 15;
		    buffer-size temporal 268;
		    priority low;
		    drop-profile-map loss-priority low protocol any drop-profile DPC-in-contract;
		    drop-profile-map loss-priority high protocol any drop-profile DPC-out-contract;
		}
		Default_10Gbps_cpa_cppc_LAN {
		    transmit-rate percent 3;
		    buffer-size temporal 598;
		    priority low;
		    drop-profile-map loss-priority low protocol any drop-profile DPC-in-contract;
		    drop-profile-map loss-priority high protocol any drop-profile DPC-out-contract;
		}
        DPC-core_cntrl {
            transmit-rate percent 3;
            buffer-size temporal 100k;
            priority low;
            drop-profile-map loss-priority low protocol any drop-profile DPC-in-contract;
            drop-profile-map loss-priority high protocol any drop-profile DPC-out-contract;
        }
        DPC-core_cntrl_chassis {
            transmit-rate percent 3;
            buffer-size temporal 100k;
            priority low;
            drop-profile-map loss-priority low protocol any drop-profile FPC-in-contract;
            drop-profile-map loss-priority high protocol any drop-profile FPC-out-contract;
        }
        Class_EF_1Gbps_cpa_cppc_71percent {
            transmit-rate percent 71 rate-limit;
            priority high;
        }
        Class_Cntrl_1Gbps_cpa_cppc_1percent {
            transmit-rate percent 1;
            buffer-size temporal 100k;
            priority low;
        }
        Class_Mgmt_1Gbps_cpa_cppc_1percent {
            transmit-rate percent 1;
            buffer-size temporal 100k;
            priority low;
            drop-profile-map loss-priority low protocol any drop-profile FPC-in-contract;
        }
        Class_AF4_1Gbps_cpa_cppc_6percent {
            transmit-rate percent 6;
            buffer-size temporal 13380;
            priority low;
            drop-profile-map loss-priority low protocol any drop-profile FPC-in-contract;
            drop-profile-map loss-priority high protocol any drop-profile FPC-out-contract;
        }
        Class_AF3_1Gbps_cpa_cppc_6percent {
            transmit-rate percent 6;
            buffer-size temporal 13380;
            priority low;
            drop-profile-map loss-priority low protocol any drop-profile FPC-in-contract;
            drop-profile-map loss-priority high protocol any drop-profile FPC-out-contract;
        }
        Class_AF2_1Gbps_cpa_cppc_6percent {
            transmit-rate percent 6;
            buffer-size temporal 13380;
            priority low;
            drop-profile-map loss-priority low protocol any drop-profile FPC-in-contract;
            drop-profile-map loss-priority high protocol any drop-profile FPC-out-contract;
        }
        Class_AF1_1Gbps_cpa_cppc_6percent {
            transmit-rate percent 6;
            buffer-size temporal 13380;
            priority low;
            drop-profile-map loss-priority low protocol any drop-profile FPC-in-contract;
            drop-profile-map loss-priority high protocol any drop-profile FPC-out-contract;
        }
        Class_BE_1Gbps_cpa_cppc_3percent {
            transmit-rate percent 3;
            buffer-size temporal 37840;
            priority low;
            drop-profile-map loss-priority low protocol any drop-profile FPC-out-contract;
        }
        Class_Mgmt_leased_line_cpa_cppc_1percent {
            transmit-rate percent 1;
            buffer-size temporal 1k;
            priority low;
            drop-profile-map loss-priority low protocol any drop-profile FPC-in-contract;
        }
        Class_Cntrl_leased_line_cpa_cppc_1percent {
            transmit-rate percent 1;
            buffer-size temporal 1k;
            priority low;
        }
        Class_EF_leased_line_cpa_cppc_92percent {
            transmit-rate percent 92 rate-limit;
            priority high;
        }
        Class_AF4_leased_line_cpa_cppc_1percent {
            transmit-rate percent 1;
            buffer-size temporal 5k;
            priority low;
            drop-profile-map loss-priority low protocol any drop-profile FPC-in-contract;
            drop-profile-map loss-priority high protocol any drop-profile FPC-out-contract;
        }
        Class_AF3_leased_line_cpa_cppc_1percent {
            transmit-rate percent 1;
            buffer-size temporal 5k;
            priority low;
            drop-profile-map loss-priority low protocol any drop-profile FPC-in-contract;
            drop-profile-map loss-priority high protocol any drop-profile FPC-out-contract;
        }
        Class_AF2_leased_line_cpa_cppc_1percent {
            transmit-rate percent 1;
            buffer-size temporal 5k;
            priority low;
            drop-profile-map loss-priority low protocol any drop-profile FPC-in-contract;
            drop-profile-map loss-priority high protocol any drop-profile FPC-out-contract;
        }
        Class_AF1_leased_line_cpa_cppc_1percent {
            transmit-rate percent 1;
            buffer-size temporal 5k;
            priority low;
            drop-profile-map loss-priority low protocol any drop-profile FPC-in-contract;
            drop-profile-map loss-priority high protocol any drop-profile FPC-out-contract;
        }
        Class_BE_leased_line_cpa_cppc_1percent {
            transmit-rate percent 1;
            buffer-size temporal 10k;
            priority low;
            drop-profile-map loss-priority low protocol any drop-profile FPC-out-contract;
        }
        grey_probe_100k {
            transmit-rate 3956040;
            buffer-size percent 98;
            priority low;
        }
        grey_control_100k {
            transmit-rate 4k;
            buffer-size percent 1;
            priority low;
        }
        grey_bulk_100k {
            transmit-rate 39960;
            shaping-rate 39960;
            buffer-size percent 1;
            priority low;
        }
        grey_probe_500k {
            transmit-rate 9890100;
            buffer-size percent 98;
            priority low;
        }
        grey_control_500k {
            transmit-rate 10k;
            buffer-size percent 1;
            priority low;
        }
        grey_bulk_500k {
            transmit-rate 99900;
            shaping-rate 99900;
            buffer-size percent 1;
            priority low;
        }
    }
	traffic-control-profiles {
		tcp_10Gbps_cpa_cppc_LAN {
			scheduler-map scheduler_map_10Gbps_cpa_cppc_LAN;
			shaping-rate 10g;
		}
		tcp_1Gbps_cpa_cppc_LAN {
			scheduler-map scheduler_map_10Gbps_cpa_cppc_LAN;
			shaping-rate 1g;
		}
		grey-100k-POUT {
            scheduler-map grey-SOUT-100k
            shaping-rate 4m;
        }		
        grey-500k-POUT {
            scheduler-map grey-SOUT-500k
            shaping-rate 10m;
        }
        pink-POUT-100k {
            shaping-rate 100k;
        }
        pink-POUT-500k {
            shaping-rate 500k;
        }
	}
}
firewall {
    family inet {
        filter RSVP-rate-limit {
            term rsvp {
                from {
                    protocol rsvp;
                }
                then {
                    policer rsvp-policer;
                    accept;
                }
            }
            term match-all {
                then accept;
            }
        }
        filter protect-RE {
            term first-frag {
                from {
                    first-fragment;
                }
                then {
                    count first-frag;
                    discard;
                }
            }
            term next-frag {
                from {
                    is-fragment;
                }
                then {
                    count next-frag;
                    discard;
                }
            }
            term tcp-invalid-flags {
                from {
                    protocol tcp;
                    tcp-flags "syn & fin";
                }
                then {
                    count tcp-invalid-flags;
                    discard;
                }
            }
            term tcp-dos-protection {
                from {
                    protocol tcp;
                    tcp-flags "(syn & !ack) | fin | rst";
                }
                then {
                    policer tcp-connection-policer;
                    count tcp-syn;
                    next term;
                }
            }
            term telnet-in {
                from {
                    source-prefix-list {
                        telnet-addresses;
                    }
                    protocol tcp;
                    destination-port telnet;
                }
                then {
                    policer telnet-policer;
                    accept;
                }
            }
            term telnet-out {
                from {
                    protocol tcp;
                    source-port telnet;
                    tcp-established;
                }
                then accept;
            }
            term ftp {
                from {
                    source-prefix-list {
                        ftp-addresses;
                    }
                    protocol tcp;
                    port [ ftp ftp-data ];
                }
                then {
                    policer ftp-policer;
                    count ftp;
                    accept;
                }
            }
            term ospf {
                from {
                    protocol ospf;
                }
                then {
                    count ospf-traffic;
                    accept;
                }
            }
            term ldp {
                from {
                    protocol [ tcp udp ];
                    port ldp;
                }
                then {
                    count ldp-traffic;
                    accept;
                }
            }
            term ldp-ping {
                from {
                    protocol udp;
                    port 3503;
                }
                then {
                    count ldp-ping-traffic;
                    accept;
                }
            }
            term pim {
                from {
                    protocol pim;
                }
                then {
                    count pim-traffic;
                    accept;
                }
            }
            term bgp {
                from {
                    protocol tcp;
                    port bgp;
                }
                then {
                    count bgp;
                    accept;
                }
            }
            term bfd {
                from {
                    protocol udp;
                    destination-port 3784-3785;
                }
                then {
                    count bfd-traffic;
                    accept;
                }
            }
            term rsvp {
                from {
                    protocol rsvp;
                }
                then {
                    count rsvp-traffic;
                    accept;
                }
            }
            term snmp {
                from {
                    source-prefix-list {
                        snmp-addresses;
                    }
                    protocol udp;
                    destination-port snmp;
                }
                then {
                    policer snmp-policer;
                    count snmp-count;
                    accept;
                }
            }
            term ntp {
                from {
                    source-prefix-list {
                        ntp-addresses;
                    }
                    protocol udp;
                    port ntp;
                }
                then {
                    policer ntp-policer;
                    count ntp;
                    accept;
                }
            }
            term dns {
                from {
                    source-prefix-list {
                        dns-addresses;
                    }
                    protocol udp;
                    source-port domain;
                }
                then {
                    policer dns-policer;
                    count dns;
                    accept;
                }
            }
            term tacacs {
                from {
                    source-prefix-list {
                        tacacs-addresses;
                    }
                    protocol tcp;
                    source-port tacacs;
                }
                then {
                    policer tacacs-policer;
                    count tacacs;
                    accept;
                }
            }
            term traceroute {
                from {
                    protocol udp;
                    destination-port 33434-33523;
                }
                then {
                    count traceroute-traffic;
                    accept;
                }
            }
            term icmp {
                from {
                    protocol icmp;
                    icmp-type [ echo-request echo-reply unreachable time-exceeded ];
                }
                then {
                    policer small-bw-policer;
                    count icmp-traffic;
                    accept;
                }
            }
			term lab-ssh {
			    from {
			        prefix-list {
			            ssh-addresses;
			        }
			        protocol tcp;
			        port ssh;
			    }
			    then {
			        count ssh;
			        accept;
			    }
			}
			term lab-radius {
			    from {
			        prefix-list {
			            ssh-addresses;
			        }
			        protocol udp;
			        port [ 1812 1813 ];
			    }
			    then {
			        count radius;
			        accept;
			    }
			}
            term discard-everything-else {
                then {
                    count deny-everything-else;
                    log;
                    discard;
                }
            }
        }
        filter protect-RE-VRF {
            term first-frag {
                from {
                    first-fragment;
                }
                then {
                    count first-frag;
                    discard;
                }
            }
            term next-frag {
                from {
                    is-fragment;
                }
                then {
                    count next-frag;
                    discard;
                }
            }
            term allow-bfd {
                from {
                    protocol udp;
                    port [ 3784-3785 4784 ];
                }
                then {
                    count bfd-traffic;
                    accept;
                }
            }
            term allow-bgp-established {
                from {
                    protocol tcp;
                    source-port bgp;
                    tcp-established;
                }
                then {
                    count bgp-traffic;
                    accept;
                }
            }
            term allow-traceroute {
                from {
                    protocol udp;
                    destination-port 33434-33523;
                }
                then {
                    policer small-bw-policer-access;
                    count traceroute-traffic;
                    accept;
                }
            }
            term allow-icmp {
                from {
                    protocol icmp;
                    icmp-type [ echo-request echo-reply unreachable ];
                }
                then {
                    policer small-bw-policer-access;
                    count icmp-traffic;
                    accept;
                }
            }
            term allow-radius {
                from {
                    protocol udp;
                    source-port [ 1645 1812 ];
                    destination-port 1024-49151;
                }
                then {
                    count radius-traffic;
                    accept;
                }
            }
            term allow-vrrp {
                from {
                    protocol vrrp;
                }
                then {
                    count vrrp-traffic;
                    accept;
                }
            }
            term explicit-deny {
                then {
                    count all-other-traffic;
                    log;
                    discard;
                }
            }
        }
        filter input-filter-bun-unn {
            interface-specific;
            term non-icmp-tcp-udp {
                from {
                    destination-prefix-list {
                        ACL-8-loopback200;
                    }
                    protocol-except [ icmp tcp udp ];
                }
                then {
                    discard;
                }
            }
            term not-radius-to-lo0s-part1 {
                from {
                    destination-prefix-list {
                        ACL-8-loopback200;
                    }
                    protocol udp;
                    source-port-except [ 1645 1812 ];
                }
                then {
                    count rejected-not-radius-part1;
                    discard;
                }
            }
            term not-radius-to-lo0s-part2 {
                from {
                    destination-prefix-list {
                        ACL-8-loopback200;
                    }
                    protocol udp;
                    destination-port-except 1024-49151;
                }
                then {
                    count rejected-not-radius-part2;
                    discard;
                }
            }
            term not-bgp-to-lo0s-PE {
                from {
                    destination-prefix-list {
                        ACL-8-loopback200;
                    }
                    protocol tcp;
                    source-port-except bgp;
                    destination-port-except bgp;
                }
                then {
                    count rejected-not-bgp;
                    discard;
                }
            }
            term radius {
                from {
                    protocol udp;
                    source-port [ 1645 1812 ];
                    destination-port 1024-49151;
                }
                then {
                    count radius;
                    next term;
                }
            }
            term last-accept {
                then next term;
            }
        }
        filter input-filter-unb-unn {
            interface-specific;
            term denied-unb-unn-src-n-dst {
                from {
                    prefix-list {
                        ams-mgt-addr;
                        ams-mgt2-addr;
                        tfp-mgt-addr;
                        ble-mgt-addr;
                        atl-sdm-addr;
                        tacacs-server1;
                        tacacs-server2;
                        deny-unb-unn-src-n-dst;
                    }
                }
                then {
                    count deny-unb-unn-src-n-dst;
                    discard;
                }
            }
            term denied-unb-unn-as-dst {
                from {
                    destination-prefix-list {
                        deny-unb-unn-dst;
                    }
                }
                then {
                    count deny-unb-unn-as-dst;
                    discard;
                }
            }
            term non-icmp-tcp-udp {
                from {
                    destination-prefix-list {
                        ACL-8-loopback200;
                    }
                    protocol-except [ icmp tcp udp ];
                }
                then {
                    discard;
                }
            }
            term not-radius-to-lo0s-part1 {
                from {
                    destination-prefix-list {
                        ACL-8-loopback200;
                    }
                    protocol udp;
                    source-port-except [ 1645 1812 ];
                }
                then {
                    count rejected-not-radius-part1;
                    discard;
                }
            }
            term not-radius-to-lo0s-part2 {
                from {
                    destination-prefix-list {
                        ACL-8-loopback200;
                    }
                    protocol udp;
                    destination-port-except 1024-49151;
                }
                then {
                    count rejected-not-radius-part2;
                    discard;
                }
            }
            term not-bgp-to-lo0s-PE {
                from {
                    destination-prefix-list {
                        ACL-8-loopback200;
                    }
                    protocol tcp;
                    source-port-except bgp;
                    destination-port-except bgp;
                }
                then {
                    count rejected-not-bgp;
                    discard;
                }
            }
            term radius {
                from {
                    protocol udp;
                    source-port [ 1645 1812 ];
                    destination-port 1024-49151;
                }
                then {
                    count radius;
                    next term;
                }
            }
            term last-accept {
                then next term;
            }
        }
        filter input-filter-bun-num {
            interface-specific;
            term permit-icmp {
                from {
                    protocol icmp;
                }
                then {
                    policer small-bw-policer-access;
                    count icmp-traffic;
                    next term;
                }
            }
            term permit-bgp {
                from {
                    protocol tcp;
                    port bgp;
                }
                then {
                    count bgp-traffic;
                    next term;
                }
            }
            term permit-bfd {
                from {
                    protocol udp;
                    port 3784-3785;
                }
                then {
                    count bfd-traffic;
                    next term;
                }
            }
            term permit-vrrp {
                from {
                    destination-address {
                        224.0.0.18/32;
                    }
                    protocol vrrp;
                }
                then {
                    count vrrp-traffic;
                    next term;
                }
            }
            term permit-RADIUS {
                from {
                    protocol udp;
                    source-port [ 1645 1812 ];
                    destination-port 1024-49151;
                }
                then {
                    count radius-traffic;
                    next term;
                }
            }
            term permit-bootps {
                from {
                    protocol udp;
                    source-port bootps;
                    destination-port bootps;
                }
                then {
                    count bootps-traffic;
                    next term;
                }
            }
            term deny-to-pe-loopbacks {
                from {
                    destination-prefix-list {
                        ACL-8-loopback200;
                    }
                }
                then {
                    count reject-lo200;
                    discard;
                }
            }
            term next-term {
                then {
                    count all-other-traffic;
                    next term;
                }
            }
        }
        filter input-filter-unb-num {
            interface-specific;
            term denied-unb-unn-src-n-dst {
                from {
                    prefix-list {
                        ams-mgt-addr;
                        ams-mgt2-addr;
                        tfp-mgt-addr;
                        ble-mgt-addr;
                        atl-sdm-addr;
                        tacacs-server1;
                        tacacs-server2;
                        deny-unb-unn-src-n-dst;
                    }
                }
                then {
                    count deny-unb-unn-src-n-dst;
                    discard;
                }
            }
            term denied-unb-unn-as-dst {
                from {
                    destination-prefix-list {
                        deny-unb-unn-dst;
                    }
                }
                then {
                    count deny-unb-unn-dst;
                    discard;
                }
            }
            term permit-icmp {
                from {
                    protocol icmp;
                }
                then {
                    policer small-bw-policer-access;
                    count icmp-traffic;
                    next term;
                }
            }
            term permit-bgp {
                from {
                    protocol tcp;
                    port bgp;
                }
                then {
                    count bgp-traffic;
                    next term;
                }
            }
            term permit-bfd {
                from {
                    protocol udp;
                    port 3784-3785;
                }
                then {
                    count bfd-traffic;
                    next term;
                }
            }
            term permit-vrrp {
                from {
                    destination-address {
                        224.0.0.18/32;
                    }
                    protocol vrrp;
                }
                then {
                    count vrrp-traffic;
                    next term;
                }
            }
            term permit-RADIUS {
                from {
                    protocol udp;
                    source-port [ 1645 1812 ];
                    destination-port 1024-49151;
                }
                then {
                    count radius-traffic;
                    next term;
                }
            }
            term permit-bootps {
                from {
                    protocol udp;
                    source-port bootps;
                    destination-port bootps;
                }
                then {
                    count bootps-traffic;
                    next term;
                }
            }
            term deny-to-pe-loopbacks {
                from {
                    destination-prefix-list {
                        ACL-8-loopback200;
                    }
                }
                then {
                    count reject-lo200;
                    discard;
                }
            }
            term next-term {
                then {
                    count all-other-traffic;
                    next term;
                }
            }
        }
        filter grey-IN-100k {
            interface-specific;
            term BGP {
                from {
                    destination-prefix-list {
                        grey-pe-wan-primary;
                        grey-pe-wan-secondary;
                    }
                    protocol tcp;
                    source-port bgp;
                    tcp-established;
                }
                then {
                    policer Agg-grey-100k;
                    count BGP;
                    accept;
                }
            }
            term icmp-WAN1 {
                from {
                    source-prefix-list {
                        grey-ce-wan-primary;
                    }
                    destination-prefix-list {
                        grey-pe-wan-primary;
                    }
                    protocol icmp;
                    icmp-type [ echo-request echo-reply ];
                }
                then {
                    policer Agg-grey-100k;
                    count icmp-WAN1;
                    accept;
                }
            }
            term icmp-WAN2 {
                from {
                    source-prefix-list {
                        grey-ce-wan-secondary;
                    }
                    destination-prefix-list {
                        grey-pe-wan-secondary;
                    }
                    protocol icmp;
                    icmp-type [ echo-request echo-reply ];
                }
                then {
                    policer Agg-grey-100k;
                    count icmp-WAN2;
                    accept;
                }
            }
            term BFD {
                from {
                    source-prefix-list {
                        grey-ce-wan-primary;
                        grey-ce-wan-secondary;
                    }
                    destination-prefix-list {
                        grey-pe-wan-primary;
                        grey-pe-wan-secondary;
                    }
                    protocol udp;
                    destination-port 3784-3785;
                }
                then {
                    policer Agg-grey-100k;
                    count BFD;
                    accept;
                }
            }
            term drop-WAN {
                from {
                    destination-prefix-list {
                        fv-wan-subnets;
                    }
                }
                then {
                    count drop-WAN;
                    discard;
                }
            }
            term icmp-Lo99xx {
                from {
                    source-prefix-list {
                        fv-loop10s;
                    }
                    destination-prefix-list {
                        temp-PE-loops;
                    }
                    protocol icmp;
                    icmp-type echo-reply;
                }
                then {
                    policer Agg-grey-100k;
                    count icmp-Lo99xx;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term unr-Lo99xx {
                from {
                    source-prefix-list {
                        grey-ce-wan-primary;
                        grey-ce-wan-secondary;
                    }
                    destination-prefix-list {
                        temp-PE-loops;
                    }
                    protocol icmp;
                    icmp-type unreachable;
                    icmp-code port-unreachable;
                }
                then {
                    policer Agg-grey-100k;
                    count unr-Lo99xx;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term PE-Loops-drop {
                from {
                    destination-prefix-list {
                        ACL-8-loopback200;
                    }
                }
                then {
                    count PE-Loops-drop;
                    discard;
                }
            }
            term avail-saa-out {
                from {
                    source-prefix-list {
                        fv-loop10s;
                    }
                    destination-prefix-list {
                        fv-loop10s;
                    }
                    dscp [ af22 af23 ];
                    protocol icmp;
                }
                then {
                    policer perf-saa-in;
                    count avail_saa_out;
                    loss-priority high;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term avail-saa-in {
                from {
                    source-prefix-list {
                        fv-loop10s;
                    }
                    destination-prefix-list {
                        fv-loop10s;
                    }
                    dscp [ af21 cs2 ];
                    protocol icmp;
                }
                then {
                    policer perf-saa-in;
                    count avail_saa_in;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term perf-saa-out {
                from {
                    source-prefix-list {
                        fv-loop10s;
                    }
                    destination-prefix-list {
                        fv-loop10s;
                    }
                    dscp [ af12 af13 ];
                    protocol udp;
                    port 8000;
                }
                then {
                    policer perf-saa-in;
                    count perf-saa-out;
                    loss-priority high;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term perf-saa-in {
                from {
                    source-prefix-list {
                        fv-loop10s;
                    }
                    destination-prefix-list {
                        fv-loop10s;
                    }
                    dscp [ af11 cs1 ];
                    protocol udp;
                    port 8000;
                }
                then {
                    policer perf-saa-in;
                    count perf_saa_in;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term icmp-any1 {
                from {
                    protocol icmp;
                    icmp-type [ echo-reply time-exceeded ];
                }
                then {
                    policer Agg-grey-100k;
                    count icmp-any1;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term icmp-any2 {
                from {
                    protocol icmp;
                    icmp-type unreachable;
                    icmp-code [ host-unreachable port-unreachable network-unreachable fragmentation-needed ];
                }
                then {
                    policer Agg-grey-100k;
                    count icmp-any2;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term discard-icmp {
                from {
                    protocol icmp;
                }
                then {
                    count discard-icmp;
                    discard;
                }
            }
            term last-term {
                then {
                    policer Agg-grey-100k;
                    count permit-all;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
        }
        filter grey-IN-500k {
            interface-specific;
            term BGP {
                from {
                    destination-prefix-list {
                        grey-pe-wan-primary;
                        grey-pe-wan-secondary;
                    }
                    protocol tcp;
                    source-port bgp;
                    tcp-established;
                }
                then {
                    policer Agg-grey-500k;
                    count BGP;
                    accept;
                }
            }
            term icmp-WAN1 {
                from {
                    source-prefix-list {
                        grey-ce-wan-primary;
                    }
                    destination-prefix-list {
                        grey-pe-wan-primary;
                    }
                    protocol icmp;
                    icmp-type [ echo-request echo-reply ];
                }
                then {
                    policer Agg-grey-500k;
                    count icmp-WAN1;
                    accept;
                }
            }
            term icmp-WAN2 {
                from {
                    source-prefix-list {
                        grey-ce-wan-secondary;
                    }
                    destination-prefix-list {
                        grey-pe-wan-secondary;
                    }
                    protocol icmp;
                    icmp-type [ echo-request echo-reply ];
                }
                then {
                    policer Agg-grey-500k;
                    count icmp-WAN2;
                    accept;
                }
            }
            term BFD {
                from {
                    source-prefix-list {
                        grey-ce-wan-primary;
                        grey-ce-wan-secondary;
                    }
                    destination-prefix-list {
                        grey-pe-wan-primary;
                        grey-pe-wan-secondary;
                    }
                    protocol udp;
                    destination-port 3784-3785;
                }
                then {
                    policer Agg-grey-500k;
                    count BFD;
                    accept;
                }
            }
            term drop-WAN {
                from {
                    destination-prefix-list {
                        fv-wan-subnets;
                    }
                }
                then {
                    count drop-WAN;
                    discard;
                }
            }
            term icmp-Lo99xx {
                from {
                    source-prefix-list {
                        fv-loop10s;
                    }
                    destination-prefix-list {
                        temp-PE-loops;
                    }
                    protocol icmp;
                    icmp-type echo-reply;
                }
                then {
                    policer Agg-grey-500k;
                    count icmp-Lo99xx;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term unr-Lo99xx {
                from {
                    source-prefix-list {
                        grey-ce-wan-primary;
                        grey-ce-wan-secondary;
                    }
                    destination-prefix-list {
                        temp-PE-loops;
                    }
                    protocol icmp;
                    icmp-type unreachable;
                    icmp-code port-unreachable;
                }
                then {
                    policer Agg-grey-500k;
                    count unr-Lo99xx;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term PE-Loops-drop {
                from {
                    destination-prefix-list {
                        ACL-8-loopback200;
                    }
                }
                then {
                    count PE-Loops-drop;
                    discard;
                }
            }
            term avail-saa-out {
                from {
                    source-prefix-list {
                        fv-loop10s;
                    }
                    destination-prefix-list {
                        fv-loop10s;
                    }
                    dscp [ af22 af23 ];
                    protocol icmp;
                }
                then {
                    policer perf-saa-in;
                    count avail_saa_out;
                    loss-priority high;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term avail-saa-in {
                from {
                    source-prefix-list {
                        fv-loop10s;
                    }
                    destination-prefix-list {
                        fv-loop10s;
                    }
                    dscp [ af21 cs2 ];
                    protocol icmp;
                }
                then {
                    policer perf-saa-in;
                    count avail_saa_in;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term perf-saa-out {
                from {
                    source-prefix-list {
                        fv-loop10s;
                    }
                    destination-prefix-list {
                        fv-loop10s;
                    }
                    dscp [ af12 af13 ];
                    protocol udp;
                    port 8000;
                }
                then {
                    policer perf-saa-in;
                    count perf-saa-out;
                    loss-priority high;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term perf-saa-in {
                from {
                    source-prefix-list {
                        fv-loop10s;
                    }
                    destination-prefix-list {
                        fv-loop10s;
                    }
                    dscp [ af11 cs1 ];
                    protocol udp;
                    port 8000;
                }
                then {
                    policer perf-saa-in;
                    count perf_saa_in;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term icmp-any1 {
                from {
                    protocol icmp;
                    icmp-type [ echo-reply time-exceeded ];
                }
                then {
                    policer Agg-grey-500k;
                    count icmp-any1;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term icmp-any2 {
                from {
                    protocol icmp;
                    icmp-type unreachable;
                    icmp-code [ host-unreachable port-unreachable network-unreachable fragmentation-needed ];
                }
                then {
                    policer Agg-grey-500k;
                    count icmp-any2;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term discard-icmp {
                from {
                    protocol icmp;
                }
                then {
                    count discard-icmp;
                    discard;
                }
            }
            term last-term {
                then {
                    policer Agg-grey-500k;
                    count permit-all;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
        }
        filter grey-OUT {
            interface-specific;
            term BFD {
                from {
                    protocol udp;
                    destination-port 3784-3785;
                }
                then {
                    count BFD;
                    accept;
                }
            }
            term BGP {
                from {
                    protocol tcp;
                    port bgp;
                }
                then {
                    count BGP;
                    accept;
                }
            }
            term perf-saa {
                from {
                    source-prefix-list {
                        fv-loop10s;
                    }
                    destination-prefix-list {
                        fv-loop10s;
                    }
                    dscp [ af11 cs1 af12 af13 ];
                    protocol udp;
                    port 8000;
                }
                then {
                    policer probe-8k-policer;
                    count perf-saa;
                    forwarding-class FC-Q1;
                    accept;
                }
            }
            term avail-saa {
                from {
                    source-prefix-list {
                        fv-loop10s;
                    }
                    destination-prefix-list {
                        fv-loop10s;
                    }
                    dscp [ af21 cs2 af22 af23 ];
                    protocol icmp;
                }
                then {
                    policer probe-8k-policer;
                    count avail-saa;
                    forwarding-class FC-Q1;
                    accept;
                }
            }
            term bulk {
                from {
                    source-prefix-list {
                        fv-loop10s;
                    }
                    destination-prefix-list {
                        fv-loop10s;
                    }
                }
                then {
                    count bulk;
                    forwarding-class FC-Q4;
                    accept;
                }
            }
        }
        filter pink-IN-100k {
            interface-specific;
            term icmp-WAN1 {
                from {
                    source-prefix-list {
                        pink-ce-wan-primary;
                    }
                    destination-prefix-list {
                        pink-pe-wan-primary;
                    }
                    protocol icmp;
                    icmp-type [ echo-request echo-reply ];
                }
                then {
                    policer Agg-pink-100k;
                    count icmp-WAN1;
                    accept;
                }
            }
            term icmp-WAN2 {
                from {
                    source-prefix-list {
                        pink-ce-wan-secondary;
                    }
                    destination-prefix-list {
                        pink-pe-wan-secondary;
                    }
                    protocol icmp;
                    icmp-type [ echo-request echo-reply ];
                }
                then {
                    policer Agg-pink-100k;
                    count icmp-WAN2;
                    accept;
                }
            }
            term BFD {
                from {
                    source-prefix-list {
                        pink-ce-wan-primary;
                        pink-ce-wan-secondary;
                    }
                    destination-prefix-list {
                        pink-pe-wan-primary;
                        pink-pe-wan-secondary;
                    }
                    protocol udp;
                    destination-port 3784-3785;
                }
                then {
                    policer Agg-pink-100k;
                    count BFD;
                    accept;
                }
            }
            term drop-WAN {
                from {
                    destination-prefix-list {
                        fv-wan-subnets;
                    }
                }
                then {
                    count drop-WAN;
                    discard;
                }
            }
            term icmp-Lo99xx {
                from {
                    destination-prefix-list {
                        temp-PE-loops;
                    }
                    protocol icmp;
                    icmp-type echo-reply;
                }
                then {
                    policer Agg-pink-100k;
                    count icmp-Lo99xx;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term unr-Lo99xx {
                from {
                    destination-prefix-list {
                        temp-PE-loops;
                    }
                    protocol icmp;
                    icmp-type unreachable;
                    icmp-code port-unreachable;
                }
                then {
                    policer Agg-pink-100k;
                    count unr-Lo99xx;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term PE-Loops-drop {
                from {
                    destination-prefix-list {
                        ACL-8-loopback200;
                    }
                }
                then {
                    count PE-Loops-drop;
                    discard;
                }
            }
            term icmp-any1 {
                from {
                    protocol icmp;
                    icmp-type [ echo-reply time-exceeded ];
                }
                then {
                    policer Agg-pink-100k;
                    count icmp-any1;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term icmp-any2 {
                from {
                    protocol icmp;
                    icmp-type unreachable;
                    icmp-code [ host-unreachable port-unreachable network-unreachable fragmentation-needed ];
                }
                then {
                    policer Agg-pink-100k;
                    count icmp-any2;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term discard-icmp {
                from {
                    protocol icmp;
                }
                then {
                    count discard-icmp;
                    discard;
                }
            }
            term cascaded-devices-mgmt_18 {
                from {
                    source-prefix-list {
                        cascaded-subnets_18;
                    }
                    destination-prefix-list {
                        mgmt-centre-subnets_18;
                    }
                }
                then {
                    policer Agg-pink-100k;
                    count cascaded-devices-mgmt;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term cascaded-devices-mgmt_16 {
                from {
                    source-prefix-list {
                        cascaded-subnets_16;
                    }
                    destination-prefix-list {
                        mgmt-centre-subnets_16;
                    }
                }
                then {
                    policer Agg-pink-100k;
                    count cascaded-devices-mgmt;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
        }
        filter pink-IN-500k {
            interface-specific;
            term icmp-WAN1 {
                from {
                    source-prefix-list {
                        pink-ce-wan-primary;
                    }
                    destination-prefix-list {
                        pink-pe-wan-primary;
                    }
                    protocol icmp;
                    icmp-type [ echo-request echo-reply ];
                }
                then {
                    policer Agg-pink-500k;
                    count icmp-WAN1;
                    accept;
                }
            }
            term icmp-WAN2 {
                from {
                    source-prefix-list {
                        pink-ce-wan-secondary;
                    }
                    destination-prefix-list {
                        pink-pe-wan-secondary;
                    }
                    protocol icmp;
                    icmp-type [ echo-request echo-reply ];
                }
                then {
                    policer Agg-pink-500k;
                    count icmp-WAN2;
                    accept;
                }
            }
            term BFD {
                from {
                    source-prefix-list {
                        pink-ce-wan-primary;
                        pink-ce-wan-secondary;
                    }
                    destination-prefix-list {
                        pink-pe-wan-primary;
                        pink-pe-wan-secondary;
                    }
                    protocol udp;
                    destination-port 3784-3785;
                }
                then {
                    policer Agg-pink-500k;
                    count BFD;
                    accept;
                }
            }
            term drop-WAN {
                from {
                    destination-prefix-list {
                        fv-wan-subnets;
                    }
                }
                then {
                    count drop-WAN;
                    discard;
                }
            }
            term icmp-Lo99xx {
                from {
                    destination-prefix-list {
                        temp-PE-loops;
                    }
                    protocol icmp;
                    icmp-type echo-reply;
                }
                then {
                    policer Agg-pink-500k;
                    count icmp-Lo99xx;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term unr-Lo99xx {
                from {
                    destination-prefix-list {
                        temp-PE-loops;
                    }
                    protocol icmp;
                    icmp-type unreachable;
                    icmp-code port-unreachable;
                }
                then {
                    policer Agg-pink-500k;
                    count unr-Lo99xx;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term PE-Loops-drop {
                from {
                    destination-prefix-list {
                        ACL-8-loopback200;
                    }
                }
                then {
                    count PE-Loops-drop;
                    discard;
                }
            }
            term icmp-any1 {
                from {
                    protocol icmp;
                    icmp-type [ echo-reply time-exceeded ];
                }
                then {
                    policer Agg-pink-500k;
                    count icmp-any1;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term icmp-any2 {
                from {
                    protocol icmp;
                    icmp-type unreachable;
                    icmp-code [ host-unreachable port-unreachable network-unreachable fragmentation-needed ];
                }
                then {
                    policer Agg-pink-500k;
                    count icmp-any2;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term discard-icmp {
                from {
                    protocol icmp;
                }
                then {
                    count discard-icmp;
                    discard;
                }
            }
            term cascaded-devices-mgmt_18 {
                from {
                    source-prefix-list {
                        cascaded-subnets_18;
                    }
                    destination-prefix-list {
                        mgmt-centre-subnets_18;
                    }
                }
                then {
                    policer Agg-pink-500k;
                    count cascaded-devices-mgmt;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term cascaded-devices-mgmt_16 {
                from {
                    source-prefix-list {
                        cascaded-subnets_16;
                    }
                    destination-prefix-list {
                        mgmt-centre-subnets_16;
                    }
                }
                then {
                    policer Agg-pink-500k;
                    count cascaded-devices-mgmt;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
        }
        filter finex-control {
            interface-specific;
            term PIM-primary {
                from {
                    destination-address {
                        224.0.0.13/32;
                    }
                    source-prefix-list {
                        finex-ce-wan-primary;
                    }
                    protocol pim;
                }
                then {
                    policer finex-cntr-policer;
                    count PIM-1;
                    accept;
                }
            }
            term PIM-secondary {
                from {
                    destination-address {
                        224.0.0.13/32;
                    }
                    source-prefix-list {
                        finex-ce-wan-secondary;
                    }
                    protocol pim;
                }
                then {
                    policer finex-cntr-policer;
                    count PIM-2;
                    accept;
                }
            }
            term BGP-primary {
                from {
                    source-prefix-list {
                        finex-ce-wan-primary;
                    }
                    destination-prefix-list {
                        finex-pe-wan-primary;
                    }
                    protocol tcp;
                    source-port bgp;
                    tcp-established;
                }
                then {
                    policer finex-cntr-policer;
                    count BGP-1;
                    accept;
                }
            }
            term BGP-secondary {
                from {
                    source-prefix-list {
                        finex-ce-wan-secondary;
                    }
                    destination-prefix-list {
                        finex-pe-wan-secondary;
                    }
                    protocol tcp;
                    source-port bgp;
                    tcp-established;
                }
                then {
                    policer finex-cntr-policer;
                    count BGP-2;
                    accept;
                }
            }
            term icmp-WAN-primary {
                from {
                    source-prefix-list {
                        finex-ce-wan-primary;
                    }
                    destination-prefix-list {
                        finex-pe-wan-primary;
                    }
                    protocol icmp;
                    icmp-type [ echo-request echo-reply ];
                }
                then {
                    policer finex-cntr-policer;
                    count icmp-WAN-1;
                    accept;
                }
            }
            term icmp-WAN-secondary {
                from {
                    source-prefix-list {
                        finex-ce-wan-secondary;
                    }
                    destination-prefix-list {
                        finex-pe-wan-secondary;
                    }
                    protocol icmp;
                    icmp-type [ echo-request echo-reply ];
                }
                then {
                    policer finex-cntr-policer;
                    count icmp-WAN-2;
                    accept;
                }
            }
            term BFD-primary {
                from {
                    source-prefix-list {
                        finex-ce-wan-primary;
                    }
                    destination-prefix-list {
                        finex-pe-wan-primary;
                    }
                    protocol udp;
                    destination-port 3784-3785;
                }
                then {
                    policer finex-cntr-policer;
                    count BFD-1;
                    accept;
                }
            }
            term BFD-secondary {
                from {
                    source-prefix-list {
                        finex-ce-wan-secondary;
                    }
                    destination-prefix-list {
                        finex-pe-wan-secondary;
                    }
                    protocol udp;
                    destination-port 3784-3785;
                }
                then {
                    policer finex-cntr-policer;
                    count BFD-2;
                    accept;
                }
            }
            term drop-WAN {
                from {
                    destination-prefix-list {
                        fv-wan-subnets;
                    }
                }
                then {
                    count drop-WAN;
                    discard;
                }
            }
            term icmp-Lo99xx {
                from {
                    source-prefix-list {
                        fv-loop10s;
                    }
                    destination-prefix-list {
                        temp-PE-loops;
                    }
                    protocol icmp;
                    icmp-type echo-reply;
                }
                then {
                    policer finex-cntr-policer;
                    count icmp-Lo99xx;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term unr-Lo99xx {
                from {
                    source-prefix-list {
                        finex-ce-wan-primary;
                        finex-ce-wan-secondary;
                    }
                    destination-prefix-list {
                        temp-PE-loops;
                    }
                    protocol icmp;
                    icmp-type unreachable;
                    icmp-code port-unreachable;
                }
                then {
                    policer finex-cntr-policer;
                    count unr-Lo99xx;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term PE-Loops-drop {
                from {
                    destination-prefix-list {
                        ACL-8-loopback200;
                    }
                }
                then {
                    count PE-Loops-drop;
                    discard;
                }
            }
            term fv-loop10s-drop {
                from {
                    destination-prefix-list {
                        fv-loop10s;
                    }
                }
                then {
                    count fv-loop10s-drop;
                    discard;
                }
            }
            term icmp-any {
                from {
                    source-prefix-list {
                        finex-ce-wan-primary;
                        finex-ce-wan-secondary;
                    }
                    protocol icmp;
                    icmp-type [ echo-reply time-exceeded ];
                }
                then {
                    policer finex-cntr-policer;
                    count icmp-any;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
            term icmp-unreachable {
                from {
                    source-prefix-list {
                        finex-ce-wan-primary;
                        finex-ce-wan-secondary;
                    }
                    protocol icmp;
                    icmp-type unreachable;
                    icmp-code [ host-unreachable port-unreachable network-unreachable fragmentation-needed ];
                }
                then {
                    policer finex-cntr-policer;
                    count icmp-uncreachable;
                    loss-priority low;
                    forwarding-class FC-Q6;
                    accept;
                }
            }
        }
        filter acl-out-fce-connection {
            interface-specific;
            term deny-TR-client-NAT-addresses {
                from {
                    source-prefix-list {
                        acl-out-fce-connection;
                    }
                }
                then {
                    count deny-TR-client-NAT;
                    discard;
                }
            }
        }
        filter AF2-rtq-out-default {
            interface-specific;
            term AF2-rtq-sa {
                from {
                    source-prefix-list {
                        acl-sv-ALL-TERP-TR-1;
                        acl-sv-ALL-DVBP-TR-1;
                        acl-sv-TERP-LSW-EU-TR-1;
                        acl-sv-DVBP-AMH-EU-TR-1;
                        acl-sv-DVBP-BDA-AM-TR-1;
                        acl-sv-DVBP-BRU-EU-TR-1;
                        acl-sv-DVBP-CAI-ME-TR-1;
                        acl-sv-DVBP-IST-ME-TR-1;
                        acl-sv-DVBP-JKT-AP-TR-1;
                        acl-sv-DVBP-LUX-EU-TR-1;
                        acl-sv-DVBP-MAD-EU-TR-1;
                        acl-sv-DVBP-MEX-AM-TR-1;
                        acl-sv-DVBP-MIL-EU-TR-1;
                        acl-sv-DVBP-MNL-AP-TR-1;
                        acl-sv-DVBP-MOS-EU-TR-1;
                        acl-sv-DVBP-ROA-EU-TR-1;
                        acl-sv-DVBP-SAO-AM-TR-1;
                        acl-sv-DVBP-SHA-AP-TR-1;
                        acl-sv-DVBP-TEL-ME-TR-1;
                        acl-sv-DVBP-TYO-AP-TR-1;
                        acl-sv-DVBP-VII-EU-TR-1;
                        acl-sv-RPlusRealtime-TR-1;
                        acl-sv-TerPriceDisHRWS-TR-1;
                        acl-sv-TERP-CHC-AM-TR-1;
                        acl-sv-TERP-ZUR-EU-TR-1;
                    }
                    protocol icmp;
                    icmp-type [ echo-reply time-exceeded ];
                }
                then {
                    count AF2-rtq-sa;
                    loss-priority high;
                    forwarding-class FC-Q2;
                    accept;
                }
            }
            term AF2-sa-tcp {
                from {
                    source-prefix-list {
                        acl-sv-BDNBronze-TR-1;
                        acl-sv-BDN-TR-1;
                    }
                    protocol tcp;
                    port 4000;
                }
                then {
                    count AF2-sa-tcp;
                    loss-priority high;
                    forwarding-class FC-Q2;
                    accept;
                }
            }
            term AF2-sa-icmp {
                from {
                    source-prefix-list {
                        acl-sv-BDNBronze-TR-1;
                        acl-sv-BDN-TR-1;
                    }
                    protocol icmp;
                }
                then {
                    count AF2-sa-icmp;
                    loss-priority high;
                    forwarding-class FC-Q2;
                    accept;
                }
            }
            term AF2 {
                from {
                    dscp [ af21 cs2 af22 af23 ];
                }
                then {
                    count AF2-rtq-dscp;
                    loss-priority high;
                    forwarding-class FC-Q2;
                    accept;
                }
            }
        }
    }
    policer dns-policer {
        if-exceeding {
            bandwidth-limit 500k;
            burst-size-limit 15k;
        }
        then discard;
    }
    policer ftp-policer {
        if-exceeding {
            bandwidth-limit 2m;
            burst-size-limit 256k;
        }
        then discard;
    }
    policer ntp-policer {
        if-exceeding {
            bandwidth-limit 250k;
            burst-size-limit 15k;
        }
        then discard;
    }
    policer rsvp-policer {
        if-exceeding {
            bandwidth-limit 100k;
            burst-size-limit 15k;
        }
        then discard;
    }
    policer bgp-policer {
        if-exceeding {
            bandwidth-limit 10m;
            burst-size-limit 2m;
        }
        then discard;
    }
    policer small-bw-policer {
        if-exceeding {
            bandwidth-limit 10m;
            burst-size-limit 2m;
        }
        then discard;
    }
    policer snmp-policer {
        if-exceeding {
            bandwidth-limit 1m;
            burst-size-limit 15k;
        }
        then discard;
    }
    policer tacacs-policer {
        if-exceeding {
            bandwidth-limit 1m;
            burst-size-limit 15k;
        }
        then discard;
    }
    policer telnet-policer {
        if-exceeding {
            bandwidth-limit 1m;
            burst-size-limit 128k;
        }
        then discard;
    }
    policer tcp-connection-policer {
        if-exceeding {
            bandwidth-limit 50k;
            burst-size-limit 15k;
        }
        then discard;
    }
    policer small-bw-policer-access {
        if-exceeding {
            bandwidth-limit 2m;
            burst-size-limit 45000;
        }
        then discard;
    }
    policer Agg-grey-100k {
        filter-specific;
        if-exceeding {
            bandwidth-limit 97300;
            burst-size-limit 9500;
        }
        then discard;
    }
    policer Agg-grey-500k {
        filter-specific;
        if-exceeding {
            bandwidth-limit 486500;
            burst-size-limit 22000;
        }
        then discard;
    }
    policer perf-saa-in {
        filter-specific;
        if-exceeding {
           bandwidth-limit 40k;
           burst-size-limit 6k;        
        }
        then discard;
    }
    policer probe-8k-policer {
       filter-specific;
       if-exceeding {
           bandwidth-limit 40k;
           burst-size-limit 6k;
       }
       then discard;
    }
    policer Agg-pink-100k {
        filter-specific;
        if-exceeding {
            bandwidth-limit 97300;
            burst-size-limit 9500;
        }
        then discard;
    }
    policer Agg-pink-500k {
        filter-specific;
        if-exceeding {
            bandwidth-limit 486500;
            burst-size-limit 22000;
        }
        then discard;
    }
    policer finex-cntr-policer {
        filter-specific;
        if-exceeding {
            bandwidth-limit 2m;
            burst-size-limit 44k;
        }
        then discard;
    }
}
routing-instances {
    blue {
        instance-type no-forwarding;
        routing-options {
            interface-routes {
                rib-group inet daf-blue;
            }
        }
        protocols {
            ospf {
                spf-options {
                    delay 8000;
                    holddown 20000;
                    rapid-runs 3;
                }
                rib-group daf-blue;
                export daf-red-blue;
            }
        }
    }
    dummy {
        instance-type vrf;
        interface lo0.200;
        route-distinguisher 12641:1;
        vrf-import dummy_vrf_import;
        vrf-export dummy_vrf_export;
    }
    red {
        instance-type no-forwarding;
        routing-options {
            interface-routes {
                rib-group inet daf-red;
            }
        }
        protocols {
            ospf {
                spf-options {
                    delay 8000;
                    holddown 20000;
                    rapid-runs 3;
                }
                rib-group daf-red;
                export daf-red-blue;
            }
        }
    }
}
